{"version":3,"sources":["webpack:///webpack/bootstrap c5029e69af9e527451af?3d78**************","webpack:///./~/vue-loader/lib/component-normalizer.js?d4f3**************","webpack:///./src/apps/common/js/publicData.js?88d9**************","webpack:///busi_rentting.vue?a0bd******","webpack:///./src/apps/pages/busi/project/src/buni/busi_insure.vue?2ba6*******","webpack:///./src/apps/pages/busi/project/src/buni/busi_rentting.vue?e003*******","webpack:///./src/apps/pages/busi/project/src/buni/busi_insure.vue?39a0*******","webpack:///./src/apps/pages/busi/project/src/buni/busi_rentting.vue?7d0d*******","webpack:///./src/apps/common/js/publicDataJson.js?2d75**************","webpack:///prjPromotPlan.vue","webpack:///./src/apps/pages/busi/project/src/projectApproval/prjPromotPlan.vue?4508","webpack:///./src/apps/pages/busi/project/src/buni/busi_insure.vue?df61******","webpack:///./src/apps/pages/busi/project/src/projectApproval/prjPromotPlan.vue?9476","webpack:///./src/apps/pages/busi/project/src/projectApproval/prjPromotPlan.vue","webpack:///./src/apps/pages/busi/project/src/buni/busi_rentting.vue?cc1f******","webpack:///projectApproval-card.vue","webpack:///ProviderPanel.vue?4f67*","webpack:///./src/apps/pages/busi/project/src/projectApproval/projectApproval-card.vue?9df4","webpack:///./src/apps/pages/busi/project/src/projectinfo/ProviderPanel.vue?9550**","webpack:///./src/apps/pages/busi/project/src/projectApproval/projectApproval-card.vue?13ae","webpack:///./src/apps/pages/busi/project/src/projectinfo/ProviderPanel.vue?aee1**","webpack:///./src/apps/pages/busi/project/src/projectinfo/ProviderPanel.vue?314b**","webpack:///./src/apps/pages/busi/project/src/projectApproval/projectApproval-card.vue","webpack:///busi_insure.vue?94e0******"],"names":["pageSizes","publicData","page","pageSize","pubScrHeight","window","screen","height","pubSize","storedSize","localStorage","getItem","includes","Number","pageSet","lowSet","midSet","highSet","pubPageMethods","requestName","mixin","data","currentPage","totalElements","methods","handleSizeChange","val","setItem","handleCurrentChange","changePage","pageIndex","pubSizes","pagination","pubPageSizes","ylsBase","ylsBusi","ylsSale","baseUrl"],"mappings":";;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AClDA;AACA,MAAMA,YAAY,mEAAAC,CAAWC,IAAX,CAAgBF,SAAlC;AACA,MAAMG,WAAW,CAAC,MAAM;AAChB,YAAIC,eAAeC,OAAOC,MAAP,CAAcC,MAAjC;AACA,YAAIC,OAAJ;AACA,YAAIC,aAAaC,aAAaC,OAAb,CAAqB,uBAArB,CAAjB;AACA,YAAIF,cAAc,IAAd,IAAsBT,UAAUY,QAAV,CAAmBC,OAAOJ,UAAP,CAAnB,CAA1B,EAAkE;AAAE;AAC5DD,0BAAUK,OAAOJ,UAAP,CAAV;AACP,SAFD,MAEO;AACC,oBAAIL,eAAe,GAAnB,EAAwB;AAAE;AAClBI,kCAAU,mEAAAP,CAAWC,IAAX,CAAgBY,OAAhB,CAAwBC,MAAlC;AACP,iBAFD,MAEO,IAAIX,gBAAgB,GAAhB,IAAuBA,eAAe,IAA1C,EAAgD;AAC/CI,kCAAU,mEAAAP,CAAWC,IAAX,CAAgBY,OAAhB,CAAwBE,MAAlC;AACP,iBAFM,MAEA;AACCR,kCAAU,mEAAAP,CAAWC,IAAX,CAAgBY,OAAhB,CAAwBG,OAAlC;AACP;AACR;AACD,eAAOT,OAAP;AACP,CAhBgB,GAAjB;AAiBA,SAASU,cAAT,CAAwBC,cAAc,SAAtC,EAAiD;AACzC,YAAIC,QAAQ;AACJC,uBAAO;AACC,+BAAO;AACClB,wCADD;AAECH,yCAFD;AAGCsB,6CAAa,CAHd;AAICC,+CAAe;AAJhB,yBAAP;AAMP,iBARG;AASJC,yBAAS;AACDC,yCAAiBC,GAAjB,EAAsB;AACd,qCAAKvB,QAAL,GAAgBuB,GAAhB;AACAhB,6CAAaiB,OAAb,CAAqB,uBAArB,EAA8C,KAAKxB,QAAnD;AACA,qCAAKmB,WAAL,GAAmB,CAAnB;AACA,qCAAKH,WAAL,EAAkB,KAAKG,WAAL,GAAmB,CAArC,EAAwC,KAAKnB,QAA7C;AACP,yBANA;AAODyB,4CAAoBF,GAApB,EAAyB;AACjB,qCAAKJ,WAAL,GAAmBI,GAAnB;AACA,qCAAKP,WAAL,EAAkB,KAAKG,WAAL,GAAmB,CAArC,EAAwC,KAAKnB,QAA7C;AACP,yBAVA;AAWD0B,mCAAWC,SAAX,EAAsB;AACd,qCAAKR,WAAL,GAAmBQ,SAAnB;AACA,qCAAKX,WAAL,EAAkB,KAAKG,WAAL,GAAmB,CAArC,EAAwC,KAAKnB,QAA7C;AACP;AAdA;AATL,SAAZ;AA0BA,eAAOiB,KAAP;AACP;AACD,SAASW,QAAT,GAAoB;AACZ,eAAO5B,QAAP;AACP;AACD,MAAM6B,aAAad,cAAnB;AACA,MAAMe,eAAejC,SAArB;AACA,MAAM,EAAEkC,OAAF,EAAWC,OAAX,EAAoBC,OAApB,KAAgC,mEAAAnC,CAAWoC,OAAjD;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBA;;AAEA;AAEA;2CACA;SACA;gBACA;AACA;4DAEA,CACA;;iBAGA;;yDACA;0BACA;kBACA;aACA;AACA;;cAGA;2BACA;qCACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;2DACA;2CACA;gBACA;oCACA;AACA;;AAGA;AAFA;6BAGA;mDACA;AAGA;AAtBA,OADA;eAwBA;AACA;mHAEA;;;oBAEA;;sBAEA,iDAIA;AALA;AAFA;AAQA;yCACA;6BACA;AACA;AAEA;;AACA;+BACA;AACA;AAEA;;AACA;AACA;4CAGA;;AACA;AACA;uCACA;kCACA;AACA;4CACA;AACA;AACA;oCACA;+BACA;AACA;yCACA;AAEA;;AACA;gCACA;;iBAIA;;gBAEA;AAJA,SADA;iBAQA;;gBAGA;AALA;mDAMA;sBACA;wBACA;AACA;;4CAEA;mCACA;gFACA;4EACA;iCACA;wFACA;AACA;AACA;AACA;yCACA;mCACA;mFACA;8BACA;+EACA;wFACA;AACA;AACA;AAIA;;AArBA;AA5FA;AAkHA;AACA;;sBAEA;kBACA;AACA;uBACA;kBACA;AAEA;AAPA;AAQA;;kBAEA;WACA;AACA;mBAGA;;4CAEA;;4DAEA;aACA;AACA;4DACA;AACA;AAEA;AAhBA;AAiBA;aACA;AACA;YACA;SACA;AACA;;AAIA;;;cACA;6DACA;aACA;AACA;AACA;AACA;yBACA;;;uBAIA;sBAGA;AAJA,SADA;iBAMA;kBACA;;;wEAMA;AAJA;AADA;AATA;;yFAgBA;mCACA;gBACA;cACA;kBAEA;AANA,qBAOA;0CACA;sCACA,QACA,4CAEA;AACA,qBACA;;mBAEA;gBAEA;AAHA;AAIA;AACA;AACA;wCACA;wBACA;AACA;2BACA;sDACA;aACA;qDAEA;;mEACA;qDACA;6DACA;AACA;AACA;AACA;qCACA;AACA;gBACA;iDACA;8BACA;kCACA;0FACA;aACA;0FACA;AACA;AACA;sCACA,MACA,sCACA;mBACA;;iBAEA;uCACA;oBACA;4CAEA;AALA,yBAMA;2CACA;;yBAEA;sBAEA;AAHA;AAIA;2CACA;AACA;4DACA,QAEA;AAKA;;;;;0CACA;wDACA;qBACA;AACA;qCACA;AACA;yCACA,QACA,4CAEA;AACA;4DACA;mBACA;;wCAEA;sBAEA;AAHA;AAIA;AACA,yBACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;AACA;AACA;AACA;uCACA;AACA;8BACA;AACA;sBACA;6DACA;oDACA;AACA;4DAEA;;AACA;sDACA;iCACA;AACA;AACA;yCACA;gCACA;6BACA;AACA;AACA;0BACA;;yFAEA;mCACA;gBACA;kBACA;mBAEA;AANA,qBAOA;uCACA;;qBAEA;kBAEA;AAHA;eAIA;eACA;;oCAEA;kBAEA;AAHA;AAIA;AACA,oBACA;;mBAEA;gBAEA;AAHA;AAIA;gCACA;mBACA;AAEA;AApLA;AA7JA,G;;;;;;;ACrCA,yC;;;;;;;ACAA,yC;;;;;;;ACAA,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,CAAC,qB;;;;;;;AC/CD,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,CAAC,qB;;;;;;;;AChDD,IAAIpC,aAAW;AACPC,cAAK;AACWF,2BAAU,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,EAAV,CADrB;AAEWc,yBAAQ;AACAC,gCAAO,EADP;AAEAC,gCAAO,EAFP;AAGAC,iCAAQ;AAHR;AAFnB,SADE;AASPoB,iBAAQ;AACQH,yBAAQ,gBADhB;AAEQC,yBAAQ,gBAFhB;AAGQC,yBAAQ;AAHhB;AATD,CAAf;AAeA,yDAAenC,UAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkBA;;AAEA;AAEA;UACA;SACA;gBACA;AAEA;;;yDAEA;kBACA;kBACA;aACA;AACA;;cAGA;2BAEA;;wCACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;mDACA;2CACA;gBACA;oCACA;AACA;;AAGA;AAFA;6BAGA;oDACA;AAGA;AAvBA,OADA;eAyBA;gBACA;eACA;iBACA;mBACA;AACA;iCACA;6CACA;;iBAIA;;gBAEA;AAJA,SADA;iBAQA;;gBAGA;AALA;mDAMA;sBACA;wBACA;AAEA;AAvDA;AAwDA;AACA;;yBAEA;kBACA;AAEA;AAJA;AAKA;;qBAEA;WACA;AAEA;AAJA;AAKA;YAEA,CACA;AACA;YAEA;;SACA;AACA;;AAIA;;;cACA;mEACA;aACA;AACA;AACA;AACA;2BACA;;;uBAIA;sBAGA;AAJA,SADA;iBAMA;kBACA;;;;qBAKA;sBACA;4BAMA;AARA,aADA;AADA;AADA;AATA;;yFAsBA;mCACA;gBACA;cACA;kBAEA;AANA,qBAOA;0CACA;8BACA,QACA,6CAEA;AACA,qBACA;;mBAEA;gBAEA;AAHA;AAIA;AACA;AACA;gCACA;wBACA;AACA;2BACA;8CACA;aACA;6CACA;iDACA;uCACA;sDACA;AACA;AACA;AACA;6BACA;AACA;yCACA;8BACA;mCACA;0FACA;aACA;0FACA;AACA;AACA;8BACA,MACA,uCACA;mBACA;;iBAEA;uCACA;oBACA;4CAEA;AALA,yBAMA;2CACA;;yBAEA;sBAEA;AAHA;mBAIA;oDACA;mBACA;;wCAEA;sBAEA;AAHA;AAIA;AACA,yBACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;AACA;AACA;AACA;+BACA;AACA;8BACA;AACA;sBACA;qDACA;uCACA;qDACA;yDACA;6BACA;AACA;AACA;iCACA;wBACA;6BACA;AACA;AACA;kBACA;;yFAEA;mCACA;gBACA;kBACA;mBAEA;AANA,qBAOA;uCACA;;qBAEA;kBAEA;AAHA;eAIA;eACA;;oCAEA;kBAEA;AAHA;AAIA;AACA,oBACA;;mBAEA;gBAEA;AAHA;AAIA;wBACA;mBACA;AAEA;AAhKA;AArFA,G;;;;;;;ACpCA,yC;;;;;;;;ACCA;AACA,sBAA+T;;AAE/T;AACA;AACA;AACA;AACA,wBAAkH;AAClH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACfA,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,CAAC,qB;;;;;;;;AC9CD;AACA,uBAA+T;;AAE/T;AACA;AACA;AACA;AACA,yBAAkH;AAClH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACdA;AACA,sBAA+T;;AAE/T;AACA;AACA;AACA;AACA,wBAAkH;AAClH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqGA;AACA;AACA;AACA;AACA;AACA;;uBAGA;oBACA;uBACA;wBAEA;AALA;SAMA;gBACA;;iBAEA;uBACA;uBACA;kBAEA;;AACA;eACA;gBACA;;cAGA;2BACA;kCACA;AAGA;AANA,OADA;eAQA;gBACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;qBACA;sBACA;;cAGA;2BACA;6EACA;0DACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;oCACA;AAGA;AAdA,OADA;qBAgBA;kBACA;mBACA;AAEA;;AACA;;cAGA;2BACA;4CACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;gFACA;AACA;iEACA;AACA;4EACA;AAGA;AAjBA,OADA;AAmBA;;cAGA;2BACA;4CACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;0EACA;AACA;2DACA;AACA;sEACA;AAIA;AAlBA,OADA;;AAoBA;;cAGA;2BACA;4CACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;2EACA;AACA;4DACA;AACA;4EACA;AAIA;AAlBA,OADA;;AAoBA;qBACA;sBACA;;cAGA;2BACA;4EACA;AACA;AACA;oCACA;AAGA;AATA,OADA;qBAWA;kBACA;AAEA;;AACA;;cAGA;2BACA;4CACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;6EACA;AACA;8DACA;AACA;8EACA;AAIA;AAlBA,OADA;;AAoBA;uBACA;wBACA;;cAGA;2BACA;4EACA;AACA;AACA;sCACA;AAGA;AATA,OADA;uBAWA;oBACA;AAEA;;AACA;sBACA;uBACA;AAGA;;AAlNA;AAmNA;AACA;YACA;kEACA;AACA;AACA;YACA;SACA;AACA;;cAEA;AACA;8CACA;+BACA;wBACA;AACA;AACA;;yFAEA;mCACA;gBACA;mBACA;AAJA,qBAKA;qCACA;wCACA;mFACA;+FACA;mCACA,QACA,6CAEA;sCACA,QACA,6CAGA;;AACA;kFACA;cACA;qDACA;kCACA;8FACA;+BACA;AACA,iBACA;kCACA;8FACA;+BACA;AACA;;iBAEA;uCACA;oBACA;gCACA;AAJA,yBAKA;yCACA,aACA,gDAEA;wBACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;AAEA;oBACA;;mBAEA;gBAEA;AAHA;AAKA;;AACA;gCACA;;2FAEA;qCACA;kBACA;qBACA;AAJA,uBAKA;uCACA;uCACA,QACA,iDAEA;sBACA;;qBAEA;kBAEA;AAHA;AAIA;AAEA;;AACA;gCACA;;2FAEA;qCACA;kBACA;qBACA;AAJA,uBAKA;uCACA;yCACA,QACA,yCAEA;sBACA;;qBAEA;kBAEA;AAHA;AAIA;AACA;AAEA;;AACA;iBACA;sBACA;AACA;AACA;kBACA;iDACA;AACA;mDACA;mBACA;;6FAEA;uCACA;oBACA;4CACA;AAJA,yBAKA;2CACA;;yBAEA;sBAEA;AAHA;2CAIA;yCACA,QACA,6CAEA;8BACA;mDACA;mBACA;;wCAEA;sBAEA;AAHA;AAIA;yBACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;AACA;AACA;AAEA;;AACA;mBACA;wBACA;AACA;AACA;oBACA;qBACA;mDAEA;;AACA;qDACA;mBACA;cACA;kCACA;8FACA;AACA,iBACA;8FACA;AACA;;iBAEA;uCACA;oBACA;4CACA;AAJA,yBAKA;2CACA;;yBAEA;sBAEA;AAHA;2CAIA;2CACA,aACA,uCAEA;gCACA;mBACA;;wCAEA;sBAEA;AAHA;AAIA;yBACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;AACA;AACA;AAEA;;AACA;mBACA;wBACA;AACA;AACA;oBACA;mDACA;kCAEA;;AACA;qDACA;mBACA;;6FAEA;uCACA;oBACA;4CACA;AAJA,yBAKA;2CACA;;yBAEA;sBAEA;AAHA;2CAIA;2CACA,QACA,iDAEA;gCACA;mBACA;;wCAEA;sBAEA;AAHA;AAIA;yBACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;AACA;AACA;AAEA;;AACA;qBACA;0BACA;AACA;AACA;sBACA;qDACA;kCAEA;;AACA;uDACA;mBACA;;6FAEA;uCACA;oBACA;4CACA;AAJA,yBAKA;2CACA;;yBAEA;sBAEA;AAHA;2CAIA;6CACA,QACA,yCAEA;kCACA;mBACA;;wCAEA;sBAEA;AAHA;AAIA;yBACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;AACA;AACA;AAGA;;AA3SA;AArOA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxFA;;AAEA;AAEA;yBACA;SACA;gBACA;AAEA;;;yDAEA;8BACA;kBACA;aACA;AACA;;cAGA;2BACA;wCACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;2DACA;2CACA;gBACA;oCACA;AACA;;AAGA;AAFA;6BAGA;mDACA;AAGA;AAtBA,OADA;AAwBA;gDACA;iHACA;;uBAEA;wBACA;2DAEA;SAJA;AAKA;6CACA;AACA;AACA;AACA;AACA;AAEA;;AACA;AACA;AACA;AACA;AAEA;;kEACA;gCACA;2CACA;AAEA;;AACA;oBACA;2BACA,eACA,sCACA,iBACA,2BACA,uBACA;6CACA;;iBAIA;;gBAEA;AAJA,SADA;iBAQA;;gBAGA;AALA;mDAMA;sBACA;wBACA;AAEA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;mDACA;iCACA;AACA;iGACA;qGACA;2FACA;yGACA;2GACA;yGACA;+FACA;+FACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAnCA;AAnFA;AAuHA;AACA;;yBAEA;kBACA;AAEA;AAJA;AAKA;;qBAEA;WACA;AAEA;AAJA;AAKA;YAEA,CACA;AACA;YAEA;;SACA;AACA;;AAIA;;;cACA;mEACA;aACA;AACA;AACA;AACA;6BACA;;;uBAIA;sBAGA;AAJA,SADA;iBAMA;kBACA;;;;qBAKA;sBACA;4BAMA;AARA,aADA;AADA;AADA;AATA;;yFAsBA;mCACA;gBACA;cACA;kBAEA;AANA,qBAOA;0CACA;sCACA,QACA,4CAEA;AACA,qBACA;;mBAEA;gBAEA;AAHA;AAIA;AACA;AACA;4CACA;wBACA;AACA;2BACA;sDACA;aACA;qDACA;iEACA;uDACA;6DACA;AACA;AACA;AACA;yCACA;AACA;gBACA;iDACA;8BACA;gCACA;0FACA;aACA;0FACA;AACA;AACA;sCACA,MACA,sCACA;mBACA;;iBAEA;uCACA;oBACA;4CACA;AAJA,yBAKA;2CACA;;yBAEA;sBAEA;AAHA;mBAIA;4DACA;mBACA;;wCAEA;sBAEA;AAHA;AAIA;yBACA;;uBAEA;oBAEA;AAHA;AAKA;;AACA;0BACA;iGACA;gGACA;gGACA;oFACA;kGACA;oGACA;kGACA;wFACA;wFAEA;;;6FAEA;uCACA;oBACA;4CACA;AAJA,yBAKA;2CACA;;yBAEA;sBAEA;AAHA;mBAIA;;wCAEA;sBAEA;AAHA;AAIA;yBACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;AACA;AACA;AACA;2CACA;AACA;8BACA;AACA;sBACA;6DACA;+CACA;AACA;4DACA;iEACA;qCACA;AACA;AACA;6CACA;oCACA;6BACA;AACA;AACA;8BACA;;yFAEA;mCACA;gBACA;kBACA;mBAEA;AANA,qBAOA;uCACA;;qBAEA;kBAEA;AAHA;eAIA;eACA;;oCAEA;kBAEA;AAHA;AAIA;AACA,oBACA;;mBAEA;gBAEA;AAHA;AAIA;oCACA;mBACA;AAEA;AApMA;AApJA,G;;;;;;;ACrCA,yC;;;;;;;ACAA,yC;;;;;;;ACAA,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,+BAA+B,aAAa,0BAA0B;AACvE;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH,CAAC,E;;;;;;;ACxND,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,CAAC,qB;;;;;;;;AC/CD;AACA,sBAA+T;;AAE/T;AACA;AACA;AACA;AACA,wBAAkH;AAClH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACdA;AACA,uBAA+T;;AAE/T;AACA;AACA;AACA;AACA,yBAAkH;AAClH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkBA;;AAEA;AAEA;iCACA;SACA;gBACA;AACA;6DACA,CACA;;yDAEA;2BACA;kBACA;aACA;mBACA;AACA;;cAGA;2BACA;wCACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;wDACA;2CACA;gBACA;oCACA;AACA;;AAGA;AAFA;6BAGA;qDACA;AAGA;AAtBA,OADA;eAwBA;kHACA;;AAEA;AACA;AACA;AACA;AAEA;AANA;AAOA;0CACA;6BACA;AACA;AAEA;;oBACA;2BACA,eACA,sCACA,iBACA,2BACA,uBAEA,0BACA;6CACA;;iBAIA;;gBAEA;AAJA,SADA;iBAQA;;gBAGA;AALA;mDAMA;sBACA;wBACA;AAEA;AAxEA;AAyEA;AACA;;yBAEA;kBACA;AAEA;AAJA;AAKA;;qBAEA;WACA;AAEA;AAJA;AAKA;aACA;AACA;YACA;SACA;AACA;;AAIA;;;cACA;mEACA;aACA;AACA;AACA;AACA;uBACA;;;uBAIA;sBAGA;AAJA,SADA;iBAMA;kBACA;;;wEAMA;AAJA;AADA;AATA;;yFAgBA;mCACA;gBACA;cACA;kBAEA;AANA,qBAOA;0CACA;mCACA,QACA,6CAEA;AACA,qBACA;;mBAEA;gBAEA;AAHA;AAIA;AACA;AACA;yCACA;wBACA;AACA;2BACA;mDACA;aACA;kDACA;gEACA;qDACA;2DACA;AACA;AACA;AACA;sCACA;AACA;gBACA;8CACA;8BACA;8BACA;0FACA;aACA;0FACA;AACA;AACA;mCACA,MACA,wCACA;mBACA;;iBAEA;uCACA;oBACA;4CAEA;AALA,yBAMA;2CACA;;yBAEA;sBAEA;AAHA;mBAIA;yDACA;mBACA;;kCAEA;sBAEA;AAHA;AAIA;AACA,yBACA;;uBAEA;oBAEA;AAHA;AAIA;AACA;AACA;AACA;AACA;wCACA;AACA;8BACA;AACA;sBACA;0DACA;iDACA;AACA;0DAGA;;AACA;sDACA;iCACA;AACA;AACA;0CACA;iCACA;6BACA;AACA;AACA;2BACA;;yFAEA;mCACA;gBACA;kBACA;mBAEA;AANA,qBAOA;uCACA;;qBAEA;kBAEA;AAHA;eAIA;eACA;;8BAEA;kBAEA;AAHA;AAIA;AACA,oBACA;;mBAEA;gBAEA;AAHA;AAIA;iCACA;mBACA;AAEA;AA/JA;AApGA,G","file":"yls/js//busi/project/src/projectApproval/projectApproval-card.vue.c65cd7af326f45337368.en.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 776);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c5029e69af9e527451af","// this module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  scopeId,\n  cssModules\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  // inject cssModules\n  if (cssModules) {\n    var computed = Object.create(options.computed || null)\n    Object.keys(cssModules).forEach(function (key) {\n      var module = cssModules[key]\n      computed[key] = function () { return module }\n    })\n    options.computed = computed\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/component-normalizer.js\n// module id = 0\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197","import publicData from './publicDataJson.js';\r\nconst pageSizes = publicData.page.pageSizes;\r\nconst pageSize = (() => {\r\n        let pubScrHeight = window.screen.height;\r\n        let pubSize;\r\n        let storedSize = localStorage.getItem('yls-default-page-size');\r\n        if (storedSize != null && pageSizes.includes(Number(storedSize))) { //查找到存储的页显示条数且验证该页面存在页码数组中\r\n                pubSize = Number(storedSize);\r\n        } else {\r\n                if (pubScrHeight < 900) { //通过浏览器可视高度判断页页面显示条数\r\n                        pubSize = publicData.page.pageSet.lowSet;\r\n                } else if (pubScrHeight >= 900 && pubScrHeight < 1000) {\r\n                        pubSize = publicData.page.pageSet.midSet;\r\n                } else {\r\n                        pubSize = publicData.page.pageSet.highSet;\r\n                }\r\n        }\r\n        return pubSize;\r\n})();\r\nfunction pubPageMethods(requestName = 'request') {\r\n        let mixin = {\r\n                data() {\r\n                        return {\r\n                                pageSize,\r\n                                pageSizes,\r\n                                currentPage: 1,\r\n                                totalElements: 0\r\n                        }\r\n                },\r\n                methods: {\r\n                        handleSizeChange(val) {\r\n                                this.pageSize = val\r\n                                localStorage.setItem('yls-default-page-size', this.pageSize)\r\n                                this.currentPage = 1;\r\n                                this[requestName](this.currentPage - 1, this.pageSize)\r\n                        },\r\n                        handleCurrentChange(val) {\r\n                                this.currentPage = val;\r\n                                this[requestName](this.currentPage - 1, this.pageSize)\r\n                        },\r\n                        changePage(pageIndex) {\r\n                                this.currentPage = pageIndex;\r\n                                this[requestName](this.currentPage - 1, this.pageSize)\r\n                        }\r\n                }\r\n        };\r\n        return mixin;\r\n}\r\nfunction pubSizes() {\r\n        return pageSize\r\n}\r\nconst pagination = pubPageMethods\r\nconst pubPageSizes = pageSizes\r\nconst { ylsBase, ylsBusi, ylsSale } = publicData.baseUrl;\r\nexport { pubPageSizes, pubSizes, pubPageMethods, pagination };\r\nexport { ylsBase, ylsBusi, ylsSale };\n\n\n// WEBPACK FOOTER //\n// ./src/apps/common/js/publicData.js","<template>\r\n<!--租赁物信息管理模块-->\r\n<div>\r\n          <ifbp-template ref=\"busirenttingRef\"\r\n                        tplId=\"busirentting\"\r\n                        :funnode=\"funnode\"\r\n                        :nexuskey=\"nexuskey\"\r\n                        :tplData=\"busirenttingData\"\r\n                        :tplResetFun=\"renttingResetFun\"\r\n                        :methods=\"changeMethods\"\r\n                        @form-confirm-click=\"renttingFormConfirm\"\r\n                        @form-cancel-click=\"renttingFormCancel\"\r\n                        show-type=\"table-form\"\r\n                        @edit-table-click=\"renttingFormedit\"\r\n                        @delete-table-click=\"renttingFormdelete\"\r\n                        >\r\n          </ifbp-template>\r\n\r\n    <!-- 业务租赁物 删除提示框 -->\r\n    <el-dialog\r\n      title='提示'\r\n      v-model='renttingDelVisible'\r\n      :modal=\"true\"\r\n      size=\"tiny\">\r\n      <span>确认删除该条记录？删除后无法恢复。</span>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"renttingDelVisible = false , this.delId=''\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"renttingDeleteClick\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport {ylsBusi} from '../../../../../common/js/publicData.js'\r\n\r\nexport default {\r\n  //应用vue传过来接收参数\r\n  props: [\"pk_prjId\",\"type\",\"invisible\",\"Leasehold\"],\r\n  data() {\r\n    let oThis = this;\r\n    //校验\r\n    let validatecustomer = function(rule, value, callback) {\r\n      \r\n    };\r\n    return {\r\n      Leasehold:'',\r\n      \r\n      scrollDom: document.getElementsByClassName('view')[0],\r\n      renttingDelVisible: false,\r\n      rmoveindex: '',\r\n      delId: '',\r\n      //租赁物\r\n      renttingIcons: [\r\n        {\r\n          icon: 'plus',\r\n          click: function() {\r\n            if (oThis.pk_prjId === '') {\r\n              oThis.$message({\r\n                message: '未获取到项目',\r\n                type: 'error'\r\n              });\r\n              return;\r\n            }\r\n            let uitemplateComp = oThis.$refs.busirenttingRef.comp;\r\n            let table = uitemplateComp.$refs['proRentThing_t_ref'];\r\n            table.closeExpandRow();\r\n            uitemplateComp.formShow = true;\r\n            //初始化值\r\n            oThis.$refs.busirenttingRef.setData('proRentThing', {\r\n              // mobile:'13'\r\n            });\r\n            oThis.rmoveindex = '';\r\n            uitemplateComp.$refs['proRentThing_ref'].resetFields();\r\n          }\r\n        }\r\n      ],\r\n      funnode:'BT008',\r\n      //type=prj 然后372a2fcb-1db3-4ca1-98a1-c235e40329e7 否者a7715073-8a24-420a-86de-9110786e8e4b\r\n      nexuskey: oThis.type==='prj' ?'rentthingprjUI':(oThis.type==='prjApproval' ?'rentThing-prjApproval':'rentthing_busi_apply'),\r\n\r\n      busirenttingData: {\r\n        IsShowCust:'',\r\n        rules: {\r\n          thing_name: [\r\n            { required: true, message: '请输入租赁物名称', trigger: 'blur' }\r\n          ]\r\n        }\r\n      },\r\n      //渲染表格\r\n      renttingResetFun: function($node) {\r\n        if(oThis.invisible) {\r\n          return;\r\n        }\r\n\r\n        //获取供应商的节点\r\n        let $cust = $node.find(\"el-ref[v-model='proRentThing.pk_consumer']\");\r\n        //如果主表选择直租，该组件可见，否则不可见\r\n        debugger;\r\n       \r\n        //$cust.parent().css(\"v-bind:display\",'IsShowCust');\r\n        // $cust.parent().attr(\"v-bind:style='{display:IsShowCust}'\")\r\n        $cust.parent().attr(\"v-bind:style\",\"{display:IsShowCust}\")\r\n      \r\n\r\n        //绑定事件\r\n        //数量\r\n        let $thing_number = $node.find(\"el-number[v-model='proRentThing.thing_number']\");\r\n        if($thing_number.length) {\r\n          // 添加绑定事件, 数量绑定thing_numberChange\r\n          $thing_number.attr(\"v-on:change\", \"thing_numberChange\");\r\n        };\r\n        //设备单价\r\n        let $unit_cost = $node.find(\"el-money[v-model='proRentThing.unit_cost']\");\r\n        if($unit_cost.length) {\r\n          // 添加绑定事件, 设备单价绑定unit_costChange\r\n          $unit_cost.attr(\"v-on:change\", \"unit_costChange\");\r\n        };\r\n\r\n        // let $table = this.getNodeById($node, id_co);\r\n        let $table = $node.find('el-table');\r\n        let operateArr = [\r\n          {\r\n            title: '编辑',\r\n\r\n            icon: 'edit'\r\n          },\r\n          {\r\n            title: '删除',\r\n\r\n            icon: 'delete'\r\n          }\r\n        ];\r\n        let operateHtml = this.getTableOperateHtml(operateArr);\r\n        $table.append(operateHtml);\r\n        return $node[0].outerHTML;\r\n      },\r\n      changeMethods:{\r\n          thing_numberChange:function(data){\r\n            if(data&&data!==''){\r\n              if(oThis.$refs.busirenttingRef.comp.proRentThing.unit_cost!==''){\r\n                    let unit_cost=oThis.$refs.busirenttingRef.comp.proRentThing.unit_cost;\r\n                    let thing_number=data;\r\n                    oThis.$refs.busirenttingRef.comp.proRentThing.total_cost=thing_number*unit_cost;\r\n                  }\r\n            }\r\n          },\r\n          unit_costChange:function(data){\r\n            if(data&&data!==''){\r\n              if(oThis.$refs.busirenttingRef.comp.proRentThing.thing_number!==''){\r\n                    let unit_cost=data;\r\n                    let thing_number=oThis.$refs.busirenttingRef.comp.proRentThing.thing_number;\r\n                    oThis.$refs.busirenttingRef.comp.proRentThing.total_cost=thing_number*unit_cost;\r\n                  }\r\n            }\r\n          },\r\n\r\n      },\r\n    };\r\n  },\r\n  //监听引用传参后实时变动\r\n  computed: {\r\n    currentpk_prjId() {\r\n      return this.pk_prjId;\r\n    },\r\n    currentLeasehold() {\r\n      return this.Leasehold;\r\n    }\r\n  },\r\n  //监听参数变动后方法\r\n  watch: {\r\n    pk_prjId(val) {\r\n      this.requestPrjrentting();\r\n    },\r\n    Leasehold(val) {\r\n    \r\n      \r\n      if(this.Leasehold==='LEASEDIRECT'){\r\n        \r\n        this.$refs[\"busirenttingRef\"].setData(\"IsShowCust\",'inline-block');\r\n\r\n      }else{\r\n        debugger;\r\n         this.$refs[\"busirenttingRef\"].setData(\"IsShowCust\",'none');\r\n      }\r\n    }\r\n  },\r\n  //获取数据数据初始化操作\r\n  created() {},\r\n  //页面操作\r\n  mounted() {\r\n    this.request();\r\n  },\r\n  methods: {\r\n    /**\r\n       *   初始响应方法\r\n       **/\r\n    request() {\r\n      if (this.pk_prjId != '' && this.pk_prjId != undefined) {\r\n        this.requestPrjrentting();\r\n      }\r\n    },\r\n    //请求业务租赁物\r\n    requestPrjrentting() {\r\n      let data = {\r\n        'orderList': [\r\n          {\r\n            'direction': 'desc',\r\n            'property': 'ts'\r\n          }\r\n        ],\r\n        pageNum: 0,\r\n        pageSize: 0,\r\n        searchParams: {\r\n          searchMap: {\r\n            custCondList:[{key:'source_bill',oper:'=',value:this.pk_prjId}]\r\n          }\r\n        }\r\n      };\r\n      this.$http({\r\n        url: ylsBusi + 'prj/rentth/page',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        method: 'post',\r\n        data: data,\r\n        dataType: 'json'\r\n      })\r\n        .then(res => {\r\n          let originalValue = res.data.data.content;\r\n          this.$refs['busirenttingRef'].setData(\r\n            'proRentThing_t',\r\n            JSON.parse(JSON.stringify(originalValue))\r\n          );\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            message: '信息获取失败',\r\n            type: 'error'\r\n          });\r\n        });\r\n    },\r\n    //租赁物取消按钮\r\n    renttingFormCancel: function(type) {\r\n      this.rmoveindex = '';\r\n      //关闭表单或者是下拉显示行\r\n      if (type === 'form') {\r\n        this.$refs['busirenttingRef'].comp.formShow = false;\r\n      } else {\r\n        this.$refs['busirenttingRef'].getTableComp().closeExpandRow();\r\n        \r\n        let OtherContactTable = this.$refs.busirenttingRef.getData('proRentThing_t');\r\n        OtherContactTable[this.baseEditIndex] = this.baseData;\r\n        this.$refs.busirenttingRef.setData('proRentThing_t', OtherContactTable);\r\n      }\r\n    },\r\n    //租赁物主表保存\r\n    renttingFormConfirm: function() {\r\n      //获取当前数据\r\n      let url='';\r\n      let data = this.$refs.busirenttingRef.comp.proRentThing;\r\n      data.source_bill = this.pk_prjId;\r\n      if(data.pk_prj_rent_thing){\r\n         url = ylsBusi+'prj/rentth/update';\r\n      }else{\r\n         url = ylsBusi+'prj/rentth/create';\r\n      }\r\n      //保存校验\r\n      this.$refs.busirenttingRef.comp.$refs[\r\n        'proRentThing_ref'\r\n      ].validate(valid => {\r\n        if (valid) {  \r\n          this.$http({\r\n            url: url,\r\n            headers: { 'Content-Type': 'application/json' },\r\n            method: 'post',\r\n            data: JSON.parse(JSON.stringify(data))\r\n          })\r\n            .then(res => {\r\n              if (res.data.success === true) {\r\n                this.$message({\r\n                  message: '保存成功！',\r\n                  type: 'success'\r\n                });\r\n                // this.requestPrjrentting();\r\n                let originalValue = res.data.data;\r\n                //获取列表数组（根据表格数据对象参数获取相应的数组或对象）\r\n                let linarraydata = this.$refs.busirenttingRef.getData(\r\n                  'proRentThing_t'\r\n                );\r\n                /**@augments 移除位置 \r\n                 * @augments 移除个数\r\n                 * @augments 用新的对象替换（不传值则删除）\r\n                 */\r\n                \r\n                if (this.rmoveindex !== '') {\r\n                  linarraydata.splice(this.rmoveindex, 1, originalValue);\r\n                } else {\r\n                  //加入数组开始\r\n                  linarraydata.unshift(originalValue);\r\n                }\r\n                this.$refs.busirenttingRef.setData(\r\n                  'proRentThing_t',\r\n                  JSON.parse(JSON.stringify(linarraydata))\r\n                );\r\n                //隐藏详情列表\r\n                this.$refs['busirenttingRef'].comp.formShow = false;\r\n              } else {\r\n                this.$message({\r\n                  message: res.data.error.errorMessage,\r\n                  type: 'error'\r\n                });\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                message: '更新失败',\r\n                type: 'error'\r\n              });\r\n            });\r\n        }\r\n      });\r\n    },\r\n    //租赁物行编辑\r\n    renttingFormedit: function(scope) {\r\n      //记录删除位置\r\n      this.rmoveindex = scope.$index;\r\n      //行下展开表单界面\r\n      let row = scope.row;\r\n      this.$refs['busirenttingRef'].getTableComp().expandRow(row);\r\n      this.$refs['busirenttingRef'].comp.formShow = false;\r\n      //proRentThing为表单数据对象参数\r\n      this.$refs['busirenttingRef'].setData('proRentThing', row);\r\n      \r\n      // 备份数据\r\n      this.baseData = JSON.parse(JSON.stringify(scope.row));\r\n      this.baseEditIndex = scope.$index;\r\n    },\r\n    // 租赁物删除提示\r\n    renttingFormdelete: function(scope) {\r\n      this.renttingDelVisible = true;\r\n      this.delId = scope.row.pk_prj_rent_thing;\r\n    },\r\n    // 租赁物删除方法\r\n    renttingDeleteClick() {\r\n      this.$http({\r\n        url: ylsBusi + 'prj/rentth/deleteById',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        method: 'post',\r\n        dataType: 'json',\r\n        data: this.delId\r\n      })\r\n        .then(res => {\r\n          if (res.data.success === true) {\r\n            this.$message({\r\n              message: '删除成功',\r\n              type: 'success'\r\n            });\r\n            this.requestPrjrentting();\r\n          } else {\r\n            this.$message({\r\n              message: res.data.error.errorMessage,\r\n              type: 'error'\r\n            });\r\n          }\r\n        })\r\n        .catch(e => {\r\n          this.$message({\r\n            message: '信息删除失败！',\r\n            type: 'error'\r\n          });\r\n        });\r\n      this.renttingDelVisible = false;\r\n      this.delId = '';\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// busi_rentting.vue?1373bb24","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-77e088c2\",\"scoped\":false,\"hasInlineConfig\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/apps/pages/busi/project/src/buni/busi_insure.vue\n// module id = 11\n// module chunks = 0 1 2 5 6 8 9 14 68","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-7dff4da2\",\"scoped\":false,\"hasInlineConfig\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/apps/pages/busi/project/src/buni/busi_rentting.vue\n// module id = 12\n// module chunks = 0 1 2 5 6 8 9 14 66","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('ifbp-template', {\n    ref: \"insuranceRef\",\n    attrs: {\n      \"tplId\": \"insuranceId\",\n      \"funnode\": _vm.funnode,\n      \"nexuskey\": _vm.nexuskey,\n      \"tplData\": _vm.insuranceData,\n      \"tplResetFun\": _vm.insuranceResetFun,\n      \"show-type\": \"table-form\"\n    },\n    on: {\n      \"form-confirm-click\": _vm.insuranceFormConfirm,\n      \"form-cancel-click\": _vm.insuranceFormCancel,\n      \"edit-table-click\": _vm.insuranceFormedit,\n      \"delete-table-click\": _vm.insuranceFormdelete\n    }\n  }), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"提示\",\n      \"modal\": true,\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.insuranceDelVisible),\n      callback: function($$v) {\n        _vm.insuranceDelVisible = $$v\n      },\n      expression: \"insuranceDelVisible\"\n    }\n  }, [_c('span', [_vm._v(\"确认删除该条记录？删除后无法恢复。\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.insuranceDelVisible = false, this.delId = ''\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.insuranceDeleteClick\n    }\n  }, [_vm._v(\"确 定\")])], 1)])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-77e088c2\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/apps/pages/busi/project/src/buni/busi_insure.vue\n// module id = 13\n// module chunks = 0 1 2 5 6 8 9 14 68","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('ifbp-template', {\n    ref: \"busirenttingRef\",\n    attrs: {\n      \"tplId\": \"busirentting\",\n      \"funnode\": _vm.funnode,\n      \"nexuskey\": _vm.nexuskey,\n      \"tplData\": _vm.busirenttingData,\n      \"tplResetFun\": _vm.renttingResetFun,\n      \"methods\": _vm.changeMethods,\n      \"show-type\": \"table-form\"\n    },\n    on: {\n      \"form-confirm-click\": _vm.renttingFormConfirm,\n      \"form-cancel-click\": _vm.renttingFormCancel,\n      \"edit-table-click\": _vm.renttingFormedit,\n      \"delete-table-click\": _vm.renttingFormdelete\n    }\n  }), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"提示\",\n      \"modal\": true,\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.renttingDelVisible),\n      callback: function($$v) {\n        _vm.renttingDelVisible = $$v\n      },\n      expression: \"renttingDelVisible\"\n    }\n  }, [_c('span', [_vm._v(\"确认删除该条记录？删除后无法恢复。\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.renttingDelVisible = false, this.delId = ''\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.renttingDeleteClick\n    }\n  }, [_vm._v(\"确 定\")])], 1)])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-7dff4da2\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/apps/pages/busi/project/src/buni/busi_rentting.vue\n// module id = 14\n// module chunks = 0 1 2 5 6 8 9 14 66","let publicData={\r\n        page:{\r\n                        pageSizes:[10,20,30,40],\r\n                        pageSet:{            \r\n                                lowSet:10,\r\n                                midSet:10,\r\n                                highSet:20,\r\n                        }\r\n               },\r\n        baseUrl:{\r\n                        ylsBase:'/yls-base-web/',\r\n                        ylsBusi:'/yls-busi-web/',\r\n                        ylsSale:'/yls-sale-web/',\r\n                },\r\n}\r\nexport default publicData;\n\n\n// WEBPACK FOOTER //\n// ./src/apps/common/js/publicDataJson.js","<template>\r\n  <!--项目推进计划模块-->\r\n  <div>\r\n    <ifbp-template\r\n      ref=\"baseRef\"\r\n      tplId=\"tplId\"\r\n      :funnode=\"funnode\"\r\n      :nexuskey=\"nexusKey\"\r\n      :tplData=\"tplData\"\r\n      :tplResetFun=\"resetFun\"\r\n      @form-confirm-click=\"formConfirm\"\r\n      @form-cancel-click=\"formCancel\"\r\n      show-type=\"table-form\"\r\n      @edit-table-click=\"formEdit\"\r\n      @delete-table-click=\"formDelete\">\r\n    </ifbp-template>\r\n\r\n    <!-- 项目推进计划 删除提示框 -->\r\n    <el-dialog\r\n      title=\"提示\"\r\n      v-model=\"delVisible\"\r\n      :modal=\"true\"\r\n      size=\"tiny\">\r\n      <span>确认删除该条记录？删除后无法恢复。</span>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"delVisible = false , this.delId=''\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"deleteClick\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport {ylsBusi} from '../../../../../common/js/publicData.js'\r\n\r\nexport default {\r\n  //应用vue传过来接收参数\r\n  props: [\"source_bill\"],\r\n  data() {\r\n    let oThis = this;\r\n    //校验\r\n\r\n    return {\r\n      scrollDom: document.getElementsByClassName(\"view\")[0],\r\n      delVisible: false,\r\n      rmoveindex: '',\r\n      delId: '',\r\n      //标签\r\n      icons: [\r\n        {\r\n          icon: \"plus\",\r\n          click: function() {\r\n            \r\n            if (oThis.source_bill === '') {\r\n              oThis.$message({\r\n                message: '请先保存基本信息',\r\n                type: 'error'\r\n              });\r\n              return;\r\n            }\r\n            let uitemplateComp = oThis.$refs.baseRef.comp;\r\n            let table = uitemplateComp.$refs['PrjPromotPlan_t_ref'];\r\n            table.closeExpandRow();\r\n            uitemplateComp.formShow = true;\r\n            //初始化值\r\n            oThis.$refs.baseRef.setData('PrjPromotPlan', {\r\n              // mobile:'13'\r\n            });\r\n            oThis.rmoveindex ='';\r\n            uitemplateComp.$refs['PrjPromotPlan_ref'].resetFields();\r\n          }\r\n        }\r\n      ],\r\n      funnode: 'BT008',\r\n      nexusKey: 'prjPromotPlan_prjApproval',\r\n      tplData: {},\r\n      editIndex:'',\r\n      editBakData:{},\r\n      //渲染表格\r\n      resetFun: function($node) {\r\n        let $table = this.getNodeById($node, 'bz9hbv2702j');\r\n        let operateArr = [\r\n          {\r\n            title: \"编辑\",\r\n\r\n            icon: \"edit\"\r\n          },\r\n          {\r\n            title: \"删除\",\r\n\r\n            icon: \"delete\"\r\n          }\r\n        ];\r\n        let operateHtml = this.getTableOperateHtml(operateArr);\r\n        $table.append(operateHtml);\r\n        return $node[0].outerHTML;\r\n      }\r\n    };\r\n  },\r\n  //监听引用传参后实时变动\r\n  computed: {\r\n    currentsource_bill() {\r\n      return this.source_bill;\r\n    }\r\n  },\r\n  //监听参数变动后方法\r\n  watch: {\r\n    source_bill(val) {\r\n      this.requestPrjPromotPlan();\r\n    }\r\n  },\r\n  //获取数据数据初始化操作\r\n  created() {\r\n   \r\n  },\r\n  //页面操作\r\n  mounted() {\r\n    \r\n    this.request();\r\n  },\r\n  methods: {\r\n    /**\r\n       *   初始响应方法\r\n       **/\r\n    request() {\r\n      if (this.source_bill != '' && this.source_bill != undefined) {\r\n        this.requestPrjPromotPlan();\r\n      }\r\n    },\r\n    //请求项目推进计划\r\n    requestPrjPromotPlan() {\r\n      let data = {\r\n        'orderList': [\r\n          {\r\n            'direction': 'desc',\r\n            'property': 'ts'\r\n          }\r\n        ],\r\n        pageNum: 0,\r\n        pageSize: 0,\r\n        searchParams: {\r\n          searchMap: {\r\n            custCondList : [\r\n              {\r\n                'key': 'source_bill',\r\n                'oper': '=',\r\n                'value': this.source_bill\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      };\r\n      this.$http({\r\n        url: ylsBusi + 'prj/promotPlan/page',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        method: 'post',\r\n        data: data,\r\n        dataType: 'json'\r\n      })\r\n        .then(res => {\r\n          let originalValue = res.data.data.content;\r\n          this.$refs['baseRef'].setData(\r\n            'PrjPromotPlan_t',\r\n            JSON.parse(JSON.stringify(originalValue))\r\n          );\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            message: '信息获取失败',\r\n            type: 'error'\r\n          });\r\n        });\r\n    },\r\n    //取消按钮\r\n    formCancel: function(type) {\r\n      this.rmoveindex = '';\r\n      //关闭表单或者是下拉显示行\r\n      if (type === 'form') {\r\n        this.$refs['baseRef'].comp.formShow = false;\r\n      } else {\r\n        this.$refs['baseRef'].getTableComp().closeExpandRow();\r\n        var bakData = this.$refs.baseRef.getData(\"PrjPromotPlan_t\");\r\n        bakData[this.editIndex] = this.editBakData;\r\n        this.$refs.baseRef.setData(\"PrjPromotPlan_t\",bakData);\r\n      }\r\n    },\r\n    //项目推进计划主表保存\r\n    formConfirm: function() {\r\n      //获取当前数据\r\n      let data = this.$refs.baseRef.comp.PrjPromotPlan;\r\n      data.source_bill = this.source_bill;\r\n      if(data.pk_prj_promot_plan){\r\n         url = ylsBusi+'prj/promotPlan/update';\r\n      }else{\r\n         url = ylsBusi+'prj/promotPlan/create';\r\n      }\r\n      //保存校验\r\n      this.$refs.baseRef.comp.$refs[\r\n        'PrjPromotPlan_ref'\r\n      ].validate(valid => {\r\n        if (valid) {\r\n          this.$http({\r\n            url: url,\r\n            headers: { 'Content-Type': 'application/json' },\r\n            method: 'post',\r\n            data: JSON.parse(JSON.stringify(data))\r\n          })\r\n            .then(res => {\r\n              if (res.data.success === true) {\r\n                this.$message({\r\n                  message: '保存成功！',\r\n                  type: 'success'\r\n                });\r\n                this.requestPrjPromotPlan();\r\n                this.$refs['baseRef'].comp.formShow = false;\r\n              } else {\r\n                this.$message({\r\n                  message: res.data.error.errorMessage,\r\n                  type: 'error'\r\n                });\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                message: '更新失败',\r\n                type: 'error'\r\n              });\r\n            });\r\n        }\r\n      });\r\n    },\r\n    //项目推进计划 行编辑\r\n    formEdit: function(scope) {\r\n      //记录删除位置\r\n      this.rmoveindex = scope.$index;\r\n      //行下展开表单界面\r\n      let row = scope.row;\r\n      this.$refs['baseRef'].getTableComp().expandRow(row);\r\n      this.$refs['baseRef'].formShow = false;\r\n      this.$refs['baseRef'].setData('PrjPromotPlan', row);\r\n      this.editBakData = JSON.parse(JSON.stringify(scope.row));\r\n      this.editIndex = scope.$index;\r\n    },\r\n    //删除提示\r\n    formDelete: function(scope) {\r\n      this.delVisible = true;\r\n      this.delId = scope.row.pk_prj_promot_plan;\r\n    },\r\n    // 删除方法\r\n    deleteClick() {\r\n      this.$http({\r\n        url: ylsBusi + 'prj/promotPlan/deleteById',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        method: 'post',\r\n        dataType: 'json',\r\n        data: this.delId\r\n      })\r\n        .then(res => {\r\n          if (res.data.success === true) {\r\n            this.$message({\r\n              message: '删除成功',\r\n              type: 'success'\r\n            });\r\n            this.requestPrjPromotPlan();\r\n          } else {\r\n            this.$message({\r\n              message: res.data.error.errorMessage,\r\n              type: 'error'\r\n            });\r\n          }\r\n        })\r\n        .catch(e => {\r\n          this.$message({\r\n            message: '信息删除失败！',\r\n            type: 'error'\r\n          });\r\n        });\r\n      this.delVisible = false;\r\n      this.delId = '';\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// prjPromotPlan.vue?607ac47d","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-63c3a460\",\"scoped\":false,\"hasInlineConfig\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/apps/pages/busi/project/src/projectApproval/prjPromotPlan.vue\n// module id = 263\n// module chunks = 14 54","\n/* styles */\nrequire(\"!!../../../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-77e088c2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!../../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./busi_insure.vue\")\n\nvar Component = require(\"!../../../../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./busi_insure.vue\"),\n  /* template */\n  require(\"!!../../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-77e088c2\\\"}!../../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./busi_insure.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/apps/pages/busi/project/src/buni/busi_insure.vue\n// module id = 3\n// module chunks = 0 1 2 5 6 8 9 14 68","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('ifbp-template', {\n    ref: \"baseRef\",\n    attrs: {\n      \"tplId\": \"tplId\",\n      \"funnode\": _vm.funnode,\n      \"nexuskey\": _vm.nexusKey,\n      \"tplData\": _vm.tplData,\n      \"tplResetFun\": _vm.resetFun,\n      \"show-type\": \"table-form\"\n    },\n    on: {\n      \"form-confirm-click\": _vm.formConfirm,\n      \"form-cancel-click\": _vm.formCancel,\n      \"edit-table-click\": _vm.formEdit,\n      \"delete-table-click\": _vm.formDelete\n    }\n  }), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"提示\",\n      \"modal\": true,\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.delVisible),\n      callback: function($$v) {\n        _vm.delVisible = $$v\n      },\n      expression: \"delVisible\"\n    }\n  }, [_c('span', [_vm._v(\"确认删除该条记录？删除后无法恢复。\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.delVisible = false, this.delId = ''\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.deleteClick\n    }\n  }, [_vm._v(\"确 定\")])], 1)])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-63c3a460\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/apps/pages/busi/project/src/projectApproval/prjPromotPlan.vue\n// module id = 313\n// module chunks = 14 54","\n/* styles */\nrequire(\"!!../../../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-63c3a460\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!../../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./prjPromotPlan.vue\")\n\nvar Component = require(\"!../../../../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./prjPromotPlan.vue\"),\n  /* template */\n  require(\"!!../../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-63c3a460\\\"}!../../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./prjPromotPlan.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/apps/pages/busi/project/src/projectApproval/prjPromotPlan.vue\n// module id = 386\n// module chunks = 14 54","\n/* styles */\nrequire(\"!!../../../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-7dff4da2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!../../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./busi_rentting.vue\")\n\nvar Component = require(\"!../../../../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./busi_rentting.vue\"),\n  /* template */\n  require(\"!!../../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7dff4da2\\\"}!../../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./busi_rentting.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/apps/pages/busi/project/src/buni/busi_rentting.vue\n// module id = 4\n// module chunks = 0 1 2 5 6 8 9 14 66","<template>\n  <div class='main-panel'>\n    <!--节点title-->\n    <div class='title-container'>\n      <h2 class='name'>立项申请维护</h2>\n    </div>\n    <!-- 主体区域(详情页结构) -->\n    <div class='detail-main-container clearfix'>\n      <ifbp-panel-group :navbar='true' :base-scroll-top='50' :scroll-dom='scrollDom' :base-nav-bar-top='125'>\n        <!--立项信息-->\n        <ifbp-panel id='basePanel' title = '立项信息' :icons='baseIcons'>\n          <ifbp-template ref='baseTemplateRef'\n                    tplId='baseTemplate'\n                    :funnode='funnode'\n                    :nexuskey='nexuskey'\n                    show-type='form'\n                    :tplData='tplData'\n                    :editable='baseEdit'>\n          </ifbp-template>\n          <div class='form-button-div' v-if='baseEdit'>\n            <el-button type='default' class='button-no-radius' @click='baseCancel'>取消</el-button>\n            <el-button type='primary' class='button-no-radius' @click='baseConfirm'>保存</el-button>\n          </div>\n        </ifbp-panel>\n        <!--承租人基本信息-->\n        <ifbp-panel id='lesseePanel' title = '承租人基本信息' :icons='lesseeIcons'>\n          <ifbp-template ref='lesseeTemplateRef'\n                    tplId='lesseeTemplate'\n                    :funnode='lesseeFunnode'\n                    :nexuskey='lesseeNexuskey'\n                    show-type='form'\n                    :tplData='lesseeTplData'\n                    :editable='lesseeEdit'>\n          </ifbp-template>\n          <div class='form-button-div' v-if='lesseeEdit'>\n            <el-button type='default' class='button-no-radius' @click='lesseeCancel'>取消</el-button>\n            <el-button type='primary' class='button-no-radius' @click='lesseeConfirm'>保存</el-button>\n          </div>\n        </ifbp-panel>\n        <!--供应商信息-->\n        <ifbp-panel id='contProviderRef' title='供应商信息' :icons='contProviderIcons' v-if='providerVisible'>\n          <contProviderRef\n            ref='contProviderRef'\n            :source_bill='pk_prj_approval'\n            :type=\"'prjApproval'\">\n          </contProviderRef>\n        </ifbp-panel>\n        <!--租赁物信息-->\n        <ifbp-panel id='busirenttingRef' title='租赁物情况' :icons='rentTingIcons'>\n          <busirenttingRef\n            ref='busirenttingRef'\n            :pk_prjId='pk_prj_approval'\n            :Leasehold='lease_type'\n            :type=\"'prjApproval'\">\n          </busirenttingRef>\n        </ifbp-panel>\n        <!--保险信息-->\n        <ifbp-panel id='insuranceRef' title='保险信息' :icons='insuranceIcons'>\n          <insuranceRef\n            ref='insuranceRef'\n            :source_bill='pk_prj_approval'\n            :type=\"'prjApproval'\">\n          </insuranceRef>\n        </ifbp-panel>\n        <!--特殊事项-->\n        <ifbp-panel id='matterPanel' title = '特殊事项' :icons='matterIcons'>\n          <ifbp-template ref='matterTemplateRef'\n                    tplId='matterTemplate'\n                    :funnode='matterFunnode'\n                    :nexuskey='matterNexuskey'\n                    show-type='form'\n                    :tplData='matterTplData'\n                    :editable='matterEdit'>\n          </ifbp-template>\n          <div class='form-button-div' v-if='matterEdit'>\n            <el-button type='default' class='button-no-radius' @click='matterCancel'>取消</el-button>\n            <el-button type='primary' class='button-no-radius' @click='matterConfirm'>保存</el-button>\n          </div>\n        </ifbp-panel>\n        <!--项目推进计划-->\n        <ifbp-panel id='prjPromotPlanRef' title='项目推进计划' :icons='prjPromotPlanIcons'>\n          <prjPromotPlanRef\n            ref='prjPromotPlanRef'\n            :source_bill='pk_prj_approval'\n          >\n          </prjPromotPlanRef>\n        </ifbp-panel>\n        <!--项目分析-->\n        <ifbp-panel id='analysisPanel' title = '项目分析' :icons='analysisIcons'>\n          <ifbp-template ref='analysisTemplateRef'\n                    tplId='analysisTemplate'\n                    :funnode='analysisFunnode'\n                    :nexuskey='analysisNexuskey'\n                    show-type='form'\n                    :tplData='analysisTplData'\n                    :editable='analysisEdit'>\n          </ifbp-template>\n          <div class='form-button-div' v-if='analysisEdit'>\n            <el-button type='default' class='button-no-radius' @click='analysisCancel'>取消</el-button>\n            <el-button type='primary' class='button-no-radius' @click='analysisConfirm'>保存</el-button>\n          </div>\n        </ifbp-panel>\n        <!--项目操作流程-->\n        <ifbp-panel id='processPanel' title = '项目操作流程'>\n          <ifbp-template ref='processTemplateRef'\n                    tplId='processTemplate'\n                    :funnode='processFunnode'\n                    :nexuskey='processNexuskey'\n                    show-type='form'>\n          </ifbp-template>\n        </ifbp-panel>\n      </ifbp-panel-group>\n    </div>\n  </div>\n</template>\n<script>\nimport {ylsBusi} from '../../../../../common/js/publicData.js';\nimport contProviderRef from '../projectinfo/ProviderPanel.vue';\nimport insuranceRef from './../buni/busi_insure.vue';\nimport busirenttingRef from './../buni/busi_rentting.vue';\nimport prjPromotPlanRef from './prjPromotPlan.vue';\nexport default {\n  components: {\n    'contProviderRef':contProviderRef,\n    'insuranceRef': insuranceRef,\n    'busirenttingRef':busirenttingRef,\n    'prjPromotPlanRef':prjPromotPlanRef\n  },\n  data() {\n    let oThis = this;\n    return {\n      scrollDom: 'ifbpScrollDom',\n      pk_prj_approval:'',\n      providerVisible:false,\n      lease_type:'',\n\n      //立项信息 start\n      funnode:'BT008',\n      nexuskey:'',\n      baseIcons: [\n        {\n          icon: 'edit',\n          click: function() {\n            oThis.baseEdit = !oThis.baseEdit;\n          }\n        }\n      ],\n      tplData: {},\n      baseEdit: false,\n      // resetFun: function($node) {\n        // //获取客户名称\n        // var $refNode1 = this.getNodeById($node, '7i5uecnmegk');\n        // if($refNode1.length) {\n        //   $refNode1.attr('v-on:trigger', 'handleRefChange1'); \n        // }\n\n        // //获取出租方账户\n        // var $refNode2 = this.getNodeById($node, 'aljyrih6b4o');\n        // if($refNode2.length) {\n        //   $refNode2.attr('v-on:trigger', 'handleRefChange2'); \n        // }  \n      // },\n      // t_Methods: {\n        /*给客户编号、控股股东、成立时间、注册资本、法人代表、\n          客户性质、是否存在关联方交易、主营业务赋值，给出租方账户传参*/\n        // handleRefChange1: function(type, data) {\n        //   debugger;\n        //   if(type === 'change') {\n        //     this.$refs['projectApproval_form'].model.customer_code = data.value[0].refcode;\n        //     this.$refs['projectApproval_form'].model.controlling_shareholder = data.value[0].controlshareholder;\n        //     this.$refs['projectApproval_form'].model.establish_date = data.value[0].establish_date;\n        //     this.$refs['projectApproval_form'].model.capital = data.value[0].capital;\n        //     this.$refs['projectApproval_form'].model.legal_person = data.value[0].legal_person_name;\n        //     this.$refs['projectApproval_form'].model.customer_property = data.value[0].customer_property;\n        //     this.$refs['projectApproval_form'].model.link_trade = data.value[0].link_trade;\n        //     this.$refs['projectApproval_form'].model.primary_business = data.value[0].primary_business;\n            \n        //     let refParams={'key':data.value[0].id};\n        //     oThis.$refs.baseTemplateRef.setData('lessor_account_param', refParams);\n        //   }\n        // },\n        // //给出租方账号、开户行赋值\n        // handleRefChange2: function(type, data) {\n        //   debugger;\n        //   if(type === 'change') {\n        //     this.$refs['projectApproval_form'].model.lessor_account_num = data.value[0].refcode;\n        //     this.$refs['projectApproval_form'].model.deposit_bank = data.value[0].bank_no;\n        //   }\n        // }\n      // },\n      //立项信息 end\n\n      //承租人基本信息 start\n      lesseeFunnode:'BT003',\n      lesseeNexuskey:'',\n      lesseeIcons: [\n        {\n          icon: 'edit',\n          click: function() {\n            let pk_customer = oThis.$refs.baseTemplateRef.comp.projectApproval.pk_customer;\n            if(pk_customer === '' || pk_customer === null) {\n              oThis.$message({\n                message: '该立项信息没有设置承租人信息，不允许编辑！',\n                type: 'error'\n              });\n              return;\n            }\n            oThis.lesseeEdit = !oThis.lesseeEdit;\n          }\n        }\n      ],\n      lesseeTplData: {},\n      lesseeEdit: false,\n      formDataObj: '',\n      //承租人基本信息 end\n\n      //供应商标签\n      contProviderIcons: [\n        {\n          icon: 'plus',\n          click: function() {\n            if (oThis.pk_prj_approval === '') {\n              oThis.$message({\n                message: '请先保存立项信息',\n                type: 'error'\n              });\n              return;\n            }\n            oThis.$refs.contProviderRef.$refs.contProviderRef.comp.getTableComp().closeExpandRow();\n            // 重置新增数据\n            oThis.$refs.contProviderRef.$refs.contProviderRef.comp.resetFormData();\n            // 显示新增区域\n            oThis.$refs.contProviderRef.$refs.contProviderRef.comp.formShow = true;\n          }\n        }\n      ],\n      //保险信息标签\n      insuranceIcons: [\n        {\n          icon: 'plus',\n          click: function() {\n            if(oThis.pk_prj_approval===''){\n              oThis.$message({\n                message: '请先保存立项信息',\n                type: 'error'\n              });\n              return;\n            }\n            oThis.$refs.insuranceRef.$refs.insuranceRef.comp.getTableComp().closeExpandRow();\n            // 重置新增数据\n            oThis.$refs.insuranceRef.$refs.insuranceRef.comp.resetFormData();\n            // 显示新增区域\n            oThis.$refs.insuranceRef.$refs.insuranceRef.comp.formShow = true;\n          }\n        }\n      ],\n\n      //租赁物标签\n      rentTingIcons: [\n        {\n          icon: 'plus',\n          click: function() {\n            if(oThis.pk_prj_approval===''){\n              oThis.$message({\n                message: '请先保存立项信息',\n                type: 'error'\n              });\n              return;\n            }\n            oThis.$refs.busirenttingRef.$refs.busirenttingRef.getTableComp().closeExpandRow();\n            // 重置新增数据\n            oThis.$refs.busirenttingRef.$refs.busirenttingRef.resetFormData();\n            // 显示新增区域\n            oThis.$refs.busirenttingRef.$refs.busirenttingRef.comp.formShow = true;\n          }\n        }\n      ],\n\n      //特殊事项 start\n      matterFunnode:'BT008',\n      matterNexuskey:'specialMatter_prjApproval',\n      matterIcons: [\n        {\n          icon: 'edit',\n          click: function() {\n            if(this.pk_prj_approval === '' || this.pk_prj_approval === null) {\n              return;\n            }\n            oThis.matterEdit = !oThis.matterEdit;\n          }\n        }\n      ],\n      matterTplData: {},\n      matterEdit: false,\n      //特殊事项 end\n\n      //项目推进计划标签\n      prjPromotPlanIcons: [\n        {\n          icon: 'plus',\n          click: function() {\n            if(oThis.pk_prj_approval===''){\n              oThis.$message({\n                message: '请先保存立项信息',\n                type: 'error'\n              });\n              return;\n            }\n            oThis.$refs.prjPromotPlanRef.$refs.prjPromotPlanRef.getTableComp().closeExpandRow();\n            // 重置新增数据\n            oThis.$refs.prjPromotPlanRef.$refs.prjPromotPlanRef.resetFormData();\n            // 显示新增区域\n            oThis.$refs.prjPromotPlanRef.$refs.prjPromotPlanRef.comp.formShow = true;\n          }\n        }\n      ],\n\n      //项目分析 start\n      analysisFunnode:'BT008',\n      analysisNexuskey:'prjAnalysis-prjApproval',\n      analysisIcons: [\n        {\n          icon: 'edit',\n          click: function() {\n            if(this.pk_prj_approval === '' || this.pk_prj_approval === null) {\n              return;\n            }\n            oThis.analysisEdit = !oThis.analysisEdit;\n          }\n        }\n      ],\n      analysisTplData: {},\n      analysisEdit: false,\n      //项目分析 end\n\n      //项目操作流程 start\n      processFunnode:'BT008',\n      processNexuskey:'prj_process_procedure',\n      //项目操作流程 end\n\n    };\n  },\n  //获取数据数据初始化操作\n  created() {\n    this.pk_prj_approval = this.$root.$router.currentRoute.params.id;\n  },\n  //页面操作\n  mounted() {\n    this.request();\n  },\n  methods: {\n    request() {\n      //请求基本信息详情\n      if(this.pk_prj_approval===undefined){\n        this.pk_prj_approval='';\n        this.baseEdit=true;\n        return;\n      }\n      this.$http({\n        url: ylsBusi + 'prj/approval/getById',\n        headers: { 'Content-Type': 'application/json' },\n        method: 'post',\n        data: this.pk_prj_approval\n      }).then(res => {\n        let originalValue = res.data.data;\n        this.lease_type = originalValue.lease_type;\n        this.providerVisible = originalValue.lease_type === 'LEASEDIRECT'? true:false;\n        this.nexuskey = originalValue.lease_type === 'SUBLEASE'? 'prjApprovalDetail_person':'prjApprovalDetail_corp';\n        this.$refs.baseTemplateRef.setData(\n          'projectApproval',\n          JSON.parse(JSON.stringify(originalValue))\n        );\n        this.$refs.processTemplateRef.setData(\n          'projectApproval',\n          JSON.parse(JSON.stringify(originalValue))\n        );\n\n        //根据返回结果中的客户主键，获取承租人基本信息\n        if(originalValue.pk_customer != null && originalValue.pk_customer != '') {\n          let url;\n          if(originalValue.customer_type == 'CORP') {\n            this.lesseeNexuskey = 'prjApproval_lessee_corp';\n            url = ylsBusi + 'cust/corp/getByPkCustomer';\n            this.formDataObj = 'CustCorp';\n          }\n          else {\n            this.lesseeNexuskey = 'prjApproval_lessee_person';\n            url = ylsBusi + 'cust/CustPerson/getByPkCustomer';\n            this.formDataObj = 'CustPerson';\n          }\n          this.$http({\n            url: url,\n            headers: { 'Content-Type': 'application/json' },\n            method: 'post',\n            data: originalValue.pk_customer\n          }).then(res => {\n            this.$refs.lesseeTemplateRef.setData(\n              this.formDataObj,\n              JSON.parse(JSON.stringify(res.data.data))\n            );\n          }).catch(e => {\n            this.$message({\n              message: '承租人基本信息获取失败',\n              type: 'error'\n            });\n          });\n        }\n        //end\n\n      }).catch(e => {\n        this.$message({\n          message: '详情获取失败',\n          type: 'error'\n        });\n      });\n\n      //请求特殊事项\n      if(this.pk_prj_approval) {\n        this.$http({\n          url: ylsBusi + 'prj/specialMatter/getByPkPrjApproval',\n          headers: { 'Content-Type': 'application/json' },\n          method: 'post',\n          data: this.pk_prj_approval\n        }).then(res => {\n          let originalValue = res.data.data;\n          this.$refs.matterTemplateRef.setData(\n            'SpecialMatterEntity',\n            JSON.parse(JSON.stringify(originalValue))\n          );\n        }).catch(e => {\n          this.$message({\n            message: '特殊事项获取失败',\n            type: 'error'\n          });\n        });\n      }\n\n      //请求项目分析\n      if(this.pk_prj_approval) {\n        this.$http({\n          url: ylsBusi + 'prj/analysis/getByPkPrjApproval',\n          headers: { 'Content-Type': 'application/json' },\n          method: 'post',\n          data: this.pk_prj_approval\n        }).then(res => {\n          let originalValue = res.data.data;\n          this.$refs.analysisTemplateRef.setData(\n            'PrjAnalysis',\n            JSON.parse(JSON.stringify(originalValue))\n          );\n        }).catch(e => {\n          this.$message({\n            message: '项目分析获取失败',\n            type: 'error'\n          });\n        });\n      }\n    },\n\n    //立项信息 start\n    baseCancel() {\n      this.baseEdit = false;\n    },\n    //基本信息保存\n    baseConfirm() {\n      let data = this.$refs.baseTemplateRef.comp.projectApproval;\n      //表单formRef  表格tableRef\n      this.$refs.baseTemplateRef.validate(valid => {\n        if (valid) {\n          this.$http({\n            url: ylsBusi + 'prj/approval/updateOrCreate',\n            headers: { 'Content-Type': 'application/json' },\n            method: 'post',\n            data: JSON.parse(JSON.stringify(data))\n          }).then(res => {\n            if (res.data.success === true) {\n              this.$message({\n                message: '保存成功',\n                type: 'success'\n              });\n              let originalValue = res.data.data;\n              this.$refs.baseTemplateRef.setData(\n                'projectApproval',\n                JSON.parse(JSON.stringify(originalValue))\n              ); \n              this.baseEdit = false;\n              this.pk_prj_approval = originalValue.pk_prj_approval;\n            } else {\n              this.$message({\n                message: res.data.error.errorMessage,\n                type: 'error'\n              });\n            }\n          }).catch(() => {\n            this.$message({\n              message: '更新失败',\n              type: 'error'\n            });\n          });\n        }\n      });\n    },\n    //立项信息 end\n\n    //承租人基本信息 start\n    lesseeCancel() {\n      this.lesseeEdit = false;\n    },\n    //基本信息保存\n    lesseeConfirm() {\n      let tmp = this.formDataObj;\n      let data = this.$refs.lesseeTemplateRef.comp.tmp;\n\n      //表单formRef  表格tableRef\n      this.$refs.lesseeTemplateRef.validate(valid => {\n        if (valid) {\n          let url;\n          if(tmp === 'CustCorp') {\n            url = ylsBusi + 'cust/corp/update';\n          }\n          else {\n            url = ylsBusi + 'cust/CustPerson/update';\n          }\n          this.$http({\n            url: url,\n            headers: { 'Content-Type': 'application/json' },\n            method: 'post',\n            data: JSON.parse(JSON.stringify(data))\n          }).then(res => {\n            if (res.data.success === true) {\n              this.$message({\n                message: '保存成功',\n                type: 'success'\n              });\n              let originalValue = res.data.data;\n              this.$refs.lesseeTemplateRef.setData(\n                this.formDataObj,\n                JSON.parse(JSON.stringify(originalValue))\n              );\n              this.lesseeEdit = false;\n            } else {\n              this.$message({\n                message: res.data.error.errorMessage,\n                type: 'error'\n              });\n            }\n          }).catch(() => {\n            this.$message({\n              message: '更新失败',\n              type: 'error'\n            });\n          });\n        }\n      });\n    },\n    //承租人基本信息 end\n\n    //特殊事项 start\n    matterCancel() {\n      this.matterEdit = false;\n    },\n    //基本信息保存\n    matterConfirm() {\n      let data = this.$refs.matterTemplateRef.comp.SpecialMatterEntity;\n      data.pk_prj_approval = this.pk_prj_approval;\n\n      //表单formRef  表格tableRef\n      this.$refs.matterTemplateRef.validate(valid => {\n        if (valid) {\n          this.$http({\n            url: ylsBusi + 'prj/specialMatter/updateOrCreate',\n            headers: { 'Content-Type': 'application/json' },\n            method: 'post',\n            data: JSON.parse(JSON.stringify(data))\n          }).then(res => {\n            if (res.data.success === true) {\n              this.$message({\n                message: '保存成功',\n                type: 'success'\n              });\n              let originalValue = res.data.data;\n              this.$refs.matterTemplateRef.setData(\n                'SpecialMatterEntity',\n                JSON.parse(JSON.stringify(originalValue))\n              );\n              this.matterEdit = false;\n            } else {\n              this.$message({\n                message: res.data.error.errorMessage,\n                type: 'error'\n              });\n            }\n          }).catch(() => {\n            this.$message({\n              message: '更新失败',\n              type: 'error'\n            });\n          });\n        }\n      });\n    },\n    //特殊事项 end\n\n    //项目分析 start\n    analysisCancel() {\n      this.analysisEdit = false;\n    },\n    //基本信息保存\n    analysisConfirm() {\n      let data = this.$refs.analysisTemplateRef.comp.PrjAnalysis;\n      data.pk_prj_approval = this.pk_prj_approval;\n\n      //表单formRef  表格tableRef\n      this.$refs.analysisTemplateRef.validate(valid => {\n        if (valid) {\n          this.$http({\n            url: ylsBusi + 'prj/analysis/updateOrCreate',\n            headers: { 'Content-Type': 'application/json' },\n            method: 'post',\n            data: JSON.parse(JSON.stringify(data))\n          }).then(res => {\n            if (res.data.success === true) {\n              this.$message({\n                message: '保存成功',\n                type: 'success'\n              });\n              let originalValue = res.data.data;\n              this.$refs.analysisTemplateRef.setData(\n                'PrjAnalysis',\n                JSON.parse(JSON.stringify(originalValue))\n              );\n              this.analysisEdit = false;\n            } else {\n              this.$message({\n                message: res.data.error.errorMessage,\n                type: 'error'\n              });\n            }\n          }).catch(() => {\n            this.$message({\n              message: '更新失败',\n              type: 'error'\n            });\n          });\n        }\n      });\n    }\n    //项目分析 end\n\n  }\n};\n</script>\n<style>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// projectApproval-card.vue?bdfb871c","<template>\r\n  <!--供应商管理模块-->\r\n  <div>\r\n    <ifbp-template ref='contProviderRef'\r\n      tplId='contProvider'\r\n      :funnode='funnode'\r\n      :nexuskey='nexusKey'\r\n      :tplData='contProviderData'\r\n      :tplResetFun='contProviderResetFun'\r\n      @form-confirm-click='contProviderFormConfirm'\r\n      @form-cancel-click='contProviderFormCancel'\r\n      show-type='table-form'\r\n      :methods='t_Methods'\r\n      @edit-table-click='contProviderFormedit'\r\n      @delete-table-click='contProviderFormdelete'\r\n    >\r\n    </ifbp-template>\r\n\r\n    <!-- 供应商 删除提示框 -->\r\n    <el-dialog\r\n      title='提示'\r\n      v-model='contProviderDelVisible'\r\n      :modal='true'\r\n      size='tiny'>\r\n      <span>确认删除该条记录？删除后无法恢复。</span>\r\n      <span slot='footer' class='dialog-footer'>\r\n        <el-button @click=\"contProviderDelVisible = false , this.delId=''\">取 消</el-button>\r\n        <el-button type='primary' @click='contProviderDeleteClick'>确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport {ylsBusi} from '../../../../../common/js/publicData.js'\r\n\r\nexport default {\r\n  //应用vue传过来接收参数\r\n  props: ['source_bill','type'],\r\n  data() {\r\n    let oThis = this;\r\n    //校验\r\n\r\n    return {\r\n      scrollDom: document.getElementsByClassName('view')[0],\r\n      contProviderDelVisible: false,\r\n      rmoveindex: '',\r\n      delId: '',\r\n      //供应商标签\r\n      contProviderIcons: [\r\n        {\r\n          icon: 'plus',\r\n          click: function() {\r\n            if (oThis.source_bill === '') {\r\n              oThis.$message({\r\n                message: '请先保存基本信息',\r\n                type: 'error'\r\n              });\r\n              return;\r\n            }\r\n            let uitemplateComp = oThis.$refs.contProviderRef.comp;\r\n            let table = uitemplateComp.$refs['contProvider_t_ref'];\r\n            table.closeExpandRow();\r\n            uitemplateComp.formShow = true;\r\n            //初始化值\r\n            oThis.$refs.contProviderRef.setData('contProvider', {\r\n              // mobile:'13'\r\n            });\r\n            oThis.rmoveindex ='';\r\n            uitemplateComp.$refs['contProvider_ref'].resetFields();\r\n          }\r\n        }\r\n      ],\r\n      //type=prj 然后项目ui_id:8e13c344-fe4b-4e0c-a171-8e18395ee236 否者a7715073-8a24-420a-86de-9110786e8e4b\r\n      funnode: oThis.type==='prj' ? 'BT008':'BT008',\r\n      nexusKey: oThis.type==='prj' ? 'prjProviderUI' : (oThis.type==='prjApproval' ? 'prjApproval_provider' : 'prjProviderUI'),\r\n      contProviderData: {\r\n        linkManParams:{},\r\n        providerParams:{},\r\n        rentParams:{'pk_customer':'yls_dev100000001pqc'} //出租人  （一般写成固定 pk）\r\n      },\r\n      //渲染表格\r\n      contProviderResetFun: function($node) {\r\n        //获取需要过滤的控件(type === prj)\r\n        // let $salesCustomer = this.getNodeById($node, '5zouflppncd');  //卖方客户主键\r\n        // if($salesCustomer.length) {\r\n        //   $salesCustomer.attr('v-on:trigger', 'saleRefChange'); \r\n        // }\r\n\r\n        // let $pkLinkMan = this.getNodeById($node, '6bt70kv30vb');  //承租人主键\r\n        // if($pkLinkMan.length) {\r\n        //   $pkLinkMan.attr('v-on:trigger', 'linkManRefChange'); \r\n        // }\r\n        //end\r\n\r\n        let $pkProvider= this.getNodeById($node, 'ibgjz2m7kkd');  //供应商外键\r\n        if($pkProvider.length) {\r\n          $pkProvider.attr('v-on:trigger', 'pkProviderRefChange'); \r\n        }\r\n\r\n        //项目承租信息表格id：owwkujphew\r\n        let id_co='';\r\n        if(oThis.type==='prj')\r\n          id_co='i71amo6wy18';\r\n        else if(oThis.type==='contr')\r\n          id_co='';\r\n        else if(oThis.type==='prjApproval')\r\n          id_co='npnshehd4lh';\r\n        let $table = this.getNodeById($node, id_co);\r\n        let operateArr = [\r\n          {\r\n            title: '编辑',\r\n\r\n            icon: 'edit'\r\n          },\r\n          {\r\n            title: '删除',\r\n\r\n            icon: 'delete'\r\n          }\r\n        ];\r\n        let operateHtml = this.getTableOperateHtml(operateArr);\r\n        $table.append(operateHtml);\r\n        return $node[0].outerHTML;\r\n      },\r\n\r\n      t_Methods : {\r\n        // saleRefChange: function(type, data) {\r\n        //   if(type === 'change') {\r\n        //     let param = {'pk_customer':data.value[0].id};\r\n        //     oThis.$refs.contProviderRef.setData('providerParams',param);\r\n        //   }\r\n        // },\r\n        // linkManRefChange: function(type,data){\r\n        //   if(type === 'change') {\r\n        //     let param = {'pk_customer':data.value[0].id};\r\n        //     oThis.$refs.contProviderRef.setData('linkManParams',param);\r\n        //   }\r\n        // },\r\n        pkProviderRefChange: function(type,data){\r\n          if(type === 'change') {\r\n            debugger;\r\n            oThis.$refs.contProviderRef.comp.contProvider.provider_code=data.value[0].refcode; //供应商编码\r\n            oThis.$refs.contProviderRef.comp.contProvider.identity_num=data.value[0].identity_num; //证件号码\r\n            oThis.$refs.contProviderRef.comp.contProvider.capital=data.value[0].capital;//注册资本\r\n            oThis.$refs.contProviderRef.comp.contProvider.capital_paidin=data.value[0].capital_paidin; //实收资本\r\n            oThis.$refs.contProviderRef.comp.contProvider.pk_legal_person=data.value[0].pk_legal_person;//法定代表人\r\n            oThis.$refs.contProviderRef.comp.contProvider.establish_date=data.value[0].establish_date; //成立时间\r\n            oThis.$refs.contProviderRef.comp.contProvider.comm_addr=data.value[0].comm_addr;//通讯地址\r\n            oThis.$refs.contProviderRef.comp.contProvider.comm_mail=data.value[0].comm_mail;//通讯邮编\r\n            // this.$refs['contProvider_ref'].model.customer_code = data.value[0].refcode;\r\n            // this.$refs['contProvider_ref'].model.society_credit = data.value[0].society_credit;\r\n            // this.$refs['contProvider_ref'].model.capital = data.value[0].capital;\r\n            // this.$refs['contProvider_ref'].model.capital_paidin = data.value[0].capital_paidin;\r\n            // this.$refs['contProvider_ref'].model.legal_person_name = data.value[0].legal_person_name;\r\n            // this.$refs['contProvider_ref'].model.establish_date = data.value[0].establish_date;\r\n            // this.$refs['contProvider_ref'].model.comm_addr = data.value[0].comm_addr;\r\n            // this.$refs['contProvider_ref'].model.comm_mail = data.value[0].comm_mail;\r\n          }\r\n        }\r\n      },\r\n    };\r\n  },\r\n  //监听引用传参后实时变动\r\n  computed: {\r\n    currentsource_bill() {\r\n      return this.source_bill;\r\n    }\r\n  },\r\n  //监听参数变动后方法\r\n  watch: {\r\n    source_bill(val) {\r\n      this.requestPrjcontProvider();\r\n    }\r\n  },\r\n  //获取数据数据初始化操作\r\n  created() {\r\n   \r\n  },\r\n  //页面操作\r\n  mounted() {\r\n    \r\n    this.request();\r\n  },\r\n  methods: {\r\n    /**\r\n       *   初始响应方法\r\n       **/\r\n    request() {\r\n      if (this.source_bill != '' && this.source_bill != undefined) {\r\n        this.requestPrjcontProvider();\r\n      }\r\n    },\r\n    //请求业务供应商\r\n    requestPrjcontProvider() {\r\n      let data = {\r\n        'orderList': [\r\n          {\r\n            'direction': 'desc',\r\n            'property': 'ts'\r\n          }\r\n        ],\r\n        pageNum: 0,\r\n        pageSize: 0,\r\n        searchParams: {\r\n          searchMap: {\r\n            custCondList : [\r\n              {\r\n                'key': 'source_bill',\r\n                'oper': '=',\r\n                'value': this.source_bill\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      };\r\n      this.$http({\r\n        url: ylsBusi + 'prj/provider/page',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        method: 'post',\r\n        data: data,\r\n        dataType: 'json'\r\n      })\r\n        .then(res => {\r\n          let originalValue = res.data.data.content;\r\n          this.$refs['contProviderRef'].setData(\r\n            'contProvider_t',\r\n            JSON.parse(JSON.stringify(originalValue))\r\n          );\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            message: '信息获取失败',\r\n            type: 'error'\r\n          });\r\n        });\r\n    },\r\n    //供应商取消按钮\r\n    contProviderFormCancel: function(type) {\r\n      this.rmoveindex = '';\r\n      //关闭表单或者是下拉显示行\r\n      if (type === 'form') {\r\n        this.$refs['contProviderRef'].comp.formShow = false;\r\n      } else {\r\n        this.$refs['contProviderRef'].getTableComp().closeExpandRow();\r\n        var providerBakData = this.$refs.contProviderRef.getData('contProvider_t');\r\n        providerBakData[this.providerEditIndex] = this.providerEditBakData;\r\n        this.$refs.contProviderRef.setData('contProvider_t',providerBakData);\r\n      }\r\n    },\r\n    //供应商主表保存\r\n    contProviderFormConfirm: function() {\r\n      //获取当前数据\r\n      let url='';\r\n      let data = this.$refs.contProviderRef.comp.contProvider;\r\n      data.source_bill = this.source_bill;\r\n      if(data.pk_prj_provider){\r\n         url = ylsBusi+'prj/provider/update';\r\n      }else{\r\n         url = ylsBusi+'prj/provider/create';\r\n      }\r\n      //保存校验\r\n      this.$refs.contProviderRef.comp.$refs[\r\n        'contProvider_ref'\r\n      ].validate(valid => {\r\n        if (valid) {\r\n          this.$http({\r\n            url: url,\r\n            headers: { 'Content-Type': 'application/json' },\r\n            method: 'post',\r\n            data: JSON.parse(JSON.stringify(data))\r\n          }).then(res => {\r\n            if (res.data.success === true) {\r\n              this.$message({\r\n                message: '保存成功！',\r\n                type: 'success'\r\n                });\r\n              this.requestPrjcontProvider();\r\n              this.$refs['contProviderRef'].comp.formShow = false;\r\n            } else {\r\n              this.$message({\r\n                message: res.data.error.errorMessage,\r\n                type: 'error'\r\n              });\r\n            }\r\n          }).catch(() => {\r\n            this.$message({\r\n              message: '更新失败',\r\n              type: 'error'\r\n            });\r\n          });\r\n\r\n          //回写到单位客户表里去\r\n          let writeback = {};\r\n          writeback.pk_customer = this.$refs.contProviderRef.comp.contProvider.pk_provider_name; //客户外键\r\n          writeback.customer_code = this.$refs.contProviderRef.comp.contProvider.provider_code; //编码\r\n          writeback.society_credit = this.$refs.contProviderRef.comp.contProvider.identity_num; //证件号码\r\n          writeback.capital = this.$refs.contProviderRef.comp.contProvider.capital;//注册资本\r\n          writeback.capital_paidin = this.$refs.contProviderRef.comp.contProvider.capital_paidin; //实收资本\r\n          writeback.pk_legal_person = this.$refs.contProviderRef.comp.contProvider.pk_legal_person;//法定代表人\r\n          writeback.establish_date = this.$refs.contProviderRef.comp.contProvider.establish_date; //成立时间\r\n          writeback.comm_addr = this.$refs.contProviderRef.comp.contProvider.comm_addr;//通讯地址\r\n          writeback.comm_mail = this.$refs.contProviderRef.comp.contProvider.comm_mail;//通讯邮编\r\n          \r\n          this.$http({\r\n            url: ylsBusi+'cust/corp/updateOptionalByPkCustomer',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            method: 'post',\r\n            data: JSON.parse(JSON.stringify(writeback))\r\n          }).then(res => {\r\n            if (res.data.success === true) {\r\n              this.$message({\r\n                message: '回写成功！',\r\n                type: 'success'\r\n              });\r\n            } else {\r\n              this.$message({\r\n                message: res.data.error.errorMessage,\r\n                type: 'error'\r\n              });\r\n            }\r\n          }).catch(() => {\r\n            this.$message({\r\n              message: '回写失败',\r\n              type: 'error'\r\n            });\r\n          });\r\n        }\r\n      });\r\n    },\r\n    //供应商行编辑\r\n    contProviderFormedit: function(scope) {\r\n      //记录删除位置\r\n      this.rmoveindex = scope.$index;\r\n      //行下展开表单界面\r\n      let row = scope.row;\r\n      this.$refs['contProviderRef'].getTableComp().expandRow(row);\r\n      this.$refs['contProviderRef'].formShow = false;\r\n      //contProvider为表单数据对象参数\r\n      this.$refs['contProviderRef'].setData('contProvider', row);\r\n      this.providerEditBakData = JSON.parse(JSON.stringify(scope.row));\r\n      this.providerEditIndex = scope.$index;\r\n    },\r\n    // 供应商删除提示\r\n    contProviderFormdelete: function(scope) {\r\n      this.contProviderDelVisible = true;\r\n      this.delId = scope.row.pk_prj_provider;\r\n    },\r\n    // 供应商删除方法\r\n    contProviderDeleteClick() {\r\n      this.$http({\r\n        url: ylsBusi + 'prj/provider/deleteById',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        method: 'post',\r\n        dataType: 'json',\r\n        data: this.delId\r\n      })\r\n        .then(res => {\r\n          if (res.data.success === true) {\r\n            this.$message({\r\n              message: '删除成功',\r\n              type: 'success'\r\n            });\r\n            this.requestPrjcontProvider();\r\n          } else {\r\n            this.$message({\r\n              message: res.data.error.errorMessage,\r\n              type: 'error'\r\n            });\r\n          }\r\n        })\r\n        .catch(e => {\r\n          this.$message({\r\n            message: '信息删除失败！',\r\n            type: 'error'\r\n          });\r\n        });\r\n      this.contProviderDelVisible = false;\r\n      this.delId = '';\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// ProviderPanel.vue?77370dcc","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-8adcdcb2\",\"scoped\":false,\"hasInlineConfig\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/apps/pages/busi/project/src/projectApproval/projectApproval-card.vue\n// module id = 564\n// module chunks = 14","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-78a01208\",\"scoped\":false,\"hasInlineConfig\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/apps/pages/busi/project/src/projectinfo/ProviderPanel.vue\n// module id = 60\n// module chunks = 1 2 14 51","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"main-panel\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"detail-main-container clearfix\"\n  }, [_c('ifbp-panel-group', {\n    attrs: {\n      \"navbar\": true,\n      \"base-scroll-top\": 50,\n      \"scroll-dom\": _vm.scrollDom,\n      \"base-nav-bar-top\": 125\n    }\n  }, [_c('ifbp-panel', {\n    attrs: {\n      \"id\": \"basePanel\",\n      \"title\": \"立项信息\",\n      \"icons\": _vm.baseIcons\n    }\n  }, [_c('ifbp-template', {\n    ref: \"baseTemplateRef\",\n    attrs: {\n      \"tplId\": \"baseTemplate\",\n      \"funnode\": _vm.funnode,\n      \"nexuskey\": _vm.nexuskey,\n      \"show-type\": \"form\",\n      \"tplData\": _vm.tplData,\n      \"editable\": _vm.baseEdit\n    }\n  }), _vm._v(\" \"), (_vm.baseEdit) ? _c('div', {\n    staticClass: \"form-button-div\"\n  }, [_c('el-button', {\n    staticClass: \"button-no-radius\",\n    attrs: {\n      \"type\": \"default\"\n    },\n    on: {\n      \"click\": _vm.baseCancel\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"button-no-radius\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.baseConfirm\n    }\n  }, [_vm._v(\"保存\")])], 1) : _vm._e()], 1), _vm._v(\" \"), _c('ifbp-panel', {\n    attrs: {\n      \"id\": \"lesseePanel\",\n      \"title\": \"承租人基本信息\",\n      \"icons\": _vm.lesseeIcons\n    }\n  }, [_c('ifbp-template', {\n    ref: \"lesseeTemplateRef\",\n    attrs: {\n      \"tplId\": \"lesseeTemplate\",\n      \"funnode\": _vm.lesseeFunnode,\n      \"nexuskey\": _vm.lesseeNexuskey,\n      \"show-type\": \"form\",\n      \"tplData\": _vm.lesseeTplData,\n      \"editable\": _vm.lesseeEdit\n    }\n  }), _vm._v(\" \"), (_vm.lesseeEdit) ? _c('div', {\n    staticClass: \"form-button-div\"\n  }, [_c('el-button', {\n    staticClass: \"button-no-radius\",\n    attrs: {\n      \"type\": \"default\"\n    },\n    on: {\n      \"click\": _vm.lesseeCancel\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"button-no-radius\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.lesseeConfirm\n    }\n  }, [_vm._v(\"保存\")])], 1) : _vm._e()], 1), _vm._v(\" \"), (_vm.providerVisible) ? _c('ifbp-panel', {\n    attrs: {\n      \"id\": \"contProviderRef\",\n      \"title\": \"供应商信息\",\n      \"icons\": _vm.contProviderIcons\n    }\n  }, [_c('contProviderRef', {\n    ref: \"contProviderRef\",\n    attrs: {\n      \"source_bill\": _vm.pk_prj_approval,\n      \"type\": 'prjApproval'\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), _c('ifbp-panel', {\n    attrs: {\n      \"id\": \"busirenttingRef\",\n      \"title\": \"租赁物情况\",\n      \"icons\": _vm.rentTingIcons\n    }\n  }, [_c('busirenttingRef', {\n    ref: \"busirenttingRef\",\n    attrs: {\n      \"pk_prjId\": _vm.pk_prj_approval,\n      \"Leasehold\": _vm.lease_type,\n      \"type\": 'prjApproval'\n    }\n  })], 1), _vm._v(\" \"), _c('ifbp-panel', {\n    attrs: {\n      \"id\": \"insuranceRef\",\n      \"title\": \"保险信息\",\n      \"icons\": _vm.insuranceIcons\n    }\n  }, [_c('insuranceRef', {\n    ref: \"insuranceRef\",\n    attrs: {\n      \"source_bill\": _vm.pk_prj_approval,\n      \"type\": 'prjApproval'\n    }\n  })], 1), _vm._v(\" \"), _c('ifbp-panel', {\n    attrs: {\n      \"id\": \"matterPanel\",\n      \"title\": \"特殊事项\",\n      \"icons\": _vm.matterIcons\n    }\n  }, [_c('ifbp-template', {\n    ref: \"matterTemplateRef\",\n    attrs: {\n      \"tplId\": \"matterTemplate\",\n      \"funnode\": _vm.matterFunnode,\n      \"nexuskey\": _vm.matterNexuskey,\n      \"show-type\": \"form\",\n      \"tplData\": _vm.matterTplData,\n      \"editable\": _vm.matterEdit\n    }\n  }), _vm._v(\" \"), (_vm.matterEdit) ? _c('div', {\n    staticClass: \"form-button-div\"\n  }, [_c('el-button', {\n    staticClass: \"button-no-radius\",\n    attrs: {\n      \"type\": \"default\"\n    },\n    on: {\n      \"click\": _vm.matterCancel\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"button-no-radius\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.matterConfirm\n    }\n  }, [_vm._v(\"保存\")])], 1) : _vm._e()], 1), _vm._v(\" \"), _c('ifbp-panel', {\n    attrs: {\n      \"id\": \"prjPromotPlanRef\",\n      \"title\": \"项目推进计划\",\n      \"icons\": _vm.prjPromotPlanIcons\n    }\n  }, [_c('prjPromotPlanRef', {\n    ref: \"prjPromotPlanRef\",\n    attrs: {\n      \"source_bill\": _vm.pk_prj_approval\n    }\n  })], 1), _vm._v(\" \"), _c('ifbp-panel', {\n    attrs: {\n      \"id\": \"analysisPanel\",\n      \"title\": \"项目分析\",\n      \"icons\": _vm.analysisIcons\n    }\n  }, [_c('ifbp-template', {\n    ref: \"analysisTemplateRef\",\n    attrs: {\n      \"tplId\": \"analysisTemplate\",\n      \"funnode\": _vm.analysisFunnode,\n      \"nexuskey\": _vm.analysisNexuskey,\n      \"show-type\": \"form\",\n      \"tplData\": _vm.analysisTplData,\n      \"editable\": _vm.analysisEdit\n    }\n  }), _vm._v(\" \"), (_vm.analysisEdit) ? _c('div', {\n    staticClass: \"form-button-div\"\n  }, [_c('el-button', {\n    staticClass: \"button-no-radius\",\n    attrs: {\n      \"type\": \"default\"\n    },\n    on: {\n      \"click\": _vm.analysisCancel\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"button-no-radius\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.analysisConfirm\n    }\n  }, [_vm._v(\"保存\")])], 1) : _vm._e()], 1), _vm._v(\" \"), _c('ifbp-panel', {\n    attrs: {\n      \"id\": \"processPanel\",\n      \"title\": \"项目操作流程\"\n    }\n  }, [_c('ifbp-template', {\n    ref: \"processTemplateRef\",\n    attrs: {\n      \"tplId\": \"processTemplate\",\n      \"funnode\": _vm.processFunnode,\n      \"nexuskey\": _vm.processNexuskey,\n      \"show-type\": \"form\"\n    }\n  })], 1)], 1)], 1)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"title-container\"\n  }, [_c('h2', {\n    staticClass: \"name\"\n  }, [_vm._v(\"立项申请维护\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-8adcdcb2\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/apps/pages/busi/project/src/projectApproval/projectApproval-card.vue\n// module id = 664\n// module chunks = 14","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('ifbp-template', {\n    ref: \"contProviderRef\",\n    attrs: {\n      \"tplId\": \"contProvider\",\n      \"funnode\": _vm.funnode,\n      \"nexuskey\": _vm.nexusKey,\n      \"tplData\": _vm.contProviderData,\n      \"tplResetFun\": _vm.contProviderResetFun,\n      \"show-type\": \"table-form\",\n      \"methods\": _vm.t_Methods\n    },\n    on: {\n      \"form-confirm-click\": _vm.contProviderFormConfirm,\n      \"form-cancel-click\": _vm.contProviderFormCancel,\n      \"edit-table-click\": _vm.contProviderFormedit,\n      \"delete-table-click\": _vm.contProviderFormdelete\n    }\n  }), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"提示\",\n      \"modal\": true,\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.contProviderDelVisible),\n      callback: function($$v) {\n        _vm.contProviderDelVisible = $$v\n      },\n      expression: \"contProviderDelVisible\"\n    }\n  }, [_c('span', [_vm._v(\"确认删除该条记录？删除后无法恢复。\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.contProviderDelVisible = false, this.delId = ''\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.contProviderDeleteClick\n    }\n  }, [_vm._v(\"确 定\")])], 1)])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-78a01208\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/apps/pages/busi/project/src/projectinfo/ProviderPanel.vue\n// module id = 68\n// module chunks = 1 2 14 51","\n/* styles */\nrequire(\"!!../../../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-78a01208\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!../../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ProviderPanel.vue\")\n\nvar Component = require(\"!../../../../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ProviderPanel.vue\"),\n  /* template */\n  require(\"!!../../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78a01208\\\"}!../../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ProviderPanel.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/apps/pages/busi/project/src/projectinfo/ProviderPanel.vue\n// module id = 74\n// module chunks = 1 2 14 51","\n/* styles */\nrequire(\"!!../../../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-8adcdcb2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!../../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./projectApproval-card.vue\")\n\nvar Component = require(\"!../../../../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./projectApproval-card.vue\"),\n  /* template */\n  require(\"!!../../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8adcdcb2\\\"}!../../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./projectApproval-card.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/apps/pages/busi/project/src/projectApproval/projectApproval-card.vue\n// module id = 776\n// module chunks = 14","<template>\r\n<!--保险信息管理模块-->\r\n  <div>\r\n    <ifbp-template ref='insuranceRef'\r\n                  tplId='insuranceId'\r\n                  :funnode=\"funnode\"\r\n                  :nexuskey=\"nexuskey\"\r\n                  :tplData='insuranceData'\r\n                  :tplResetFun='insuranceResetFun'\r\n                  @form-confirm-click='insuranceFormConfirm'\r\n                  @form-cancel-click='insuranceFormCancel'\r\n                  show-type='table-form'\r\n                  @edit-table-click='insuranceFormedit'\r\n                  @delete-table-click='insuranceFormdelete'\r\n                  >\r\n    </ifbp-template>\r\n\r\n    <!-- 业务保险 删除提示框 -->\r\n    <el-dialog\r\n      title='提示'\r\n      v-model='insuranceDelVisible'\r\n      :modal='true'\r\n      size='tiny'>\r\n      <span>确认删除该条记录？删除后无法恢复。</span>\r\n      <span slot='footer' class='dialog-footer'>\r\n        <el-button @click=\"insuranceDelVisible = false , this.delId=''\">取 消</el-button>\r\n        <el-button type='primary' @click='insuranceDeleteClick'>确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport {ylsBusi} from '../../../../../common/js/publicData.js'\r\n\r\nexport default {\r\n  //应用vue传过来接收参数\r\n  props: ['source_bill','type','invisible'],\r\n  data() {\r\n    let oThis = this;\r\n    //校验\r\n    let validateInsurance = function(rule, value, callback) {\r\n    };\r\n    return {\r\n      scrollDom: document.getElementsByClassName('view')[0],\r\n      insuranceDelVisible: false,\r\n      rmoveindex: '',\r\n      delId: '',\r\n      back_object:'',\r\n      //保险\r\n      insuranceIcons: [\r\n        {\r\n          icon: 'plus',\r\n          click: function() {\r\n            if (oThis.source_bill === '') {\r\n              oThis.$message({\r\n                message: '未获取到项目',\r\n                type: 'error'\r\n              });\r\n              return;\r\n            }\r\n            let uitemplateComp = oThis.$refs.insuranceRef.comp;\r\n            let table = uitemplateComp.$refs['projectInsure-table'];\r\n            table.closeExpandRow();\r\n            uitemplateComp.formShow = true;\r\n            //初始化值\r\n            oThis.$refs.insuranceRef.setData('ProjectInsure', {\r\n              // mobile:'13'\r\n            });\r\n            oThis.rmoveindex = '';\r\n            uitemplateComp.$refs['projectInsure-form'].resetFields();\r\n          }\r\n        }\r\n      ],\r\n      funnode:'BT008',\r\n      nexuskey: oThis.type==='prj' ? 'ProjectInsureUI':(oThis.type==='prjApproval' ? 'PrjApprovalInsureUI':'insurance_apply'),\r\n      insuranceData: {\r\n        // rules: {\r\n        //   thing_name: [\r\n        //     { required: true, message: '请输入保险名称', trigger: 'blur' }\r\n        //   ]\r\n        // }\r\n      },\r\n      //渲染表格\r\n      insuranceResetFun: function($node) {\r\n        if(oThis.invisible) {\r\n          return;\r\n        }\r\n\r\n        var id_co='';\r\n        if(oThis.type==='prj')\r\n          id_co='hw9gl1c375v';\r\n        else if(oThis.type==='contr')\r\n          id_co='';\r\n        else if(oThis.type==='prjApproval')\r\n          id_co='e0zihi349o';\r\n        else\r\n          id_co=\"k9goab2oawo\";\r\n        var $table = this.getNodeById($node, id_co);\r\n        let operateArr = [\r\n          {\r\n            title: '编辑',\r\n\r\n            icon: 'edit'\r\n          },\r\n          {\r\n            title: '删除',\r\n\r\n            icon: 'delete'\r\n          }\r\n        ];\r\n        let operateHtml = this.getTableOperateHtml(operateArr);\r\n        $table.append(operateHtml);\r\n        return $node[0].outerHTML;\r\n      }\r\n    };\r\n  },\r\n  //监听引用传参后实时变动\r\n  computed: {\r\n    currentSource_bill() {\r\n      return this.source_bill;\r\n    }\r\n  },\r\n  //监听参数变动后方法\r\n  watch: {\r\n    source_bill(val) {\r\n      this.requestInsurance();\r\n    }\r\n  },\r\n  //获取数据数据初始化操作\r\n  created() {},\r\n  //页面操作\r\n  mounted() {\r\n    this.request();\r\n  },\r\n  methods: {\r\n    /**\r\n       *   初始响应方法\r\n       **/\r\n    request() {\r\n      if (this.source_bill != '' && this.source_bill != undefined) {\r\n        this.requestInsurance();\r\n      }\r\n    },\r\n    //请求业务保险\r\n    requestInsurance() {\r\n      let data = {\r\n        'orderList': [\r\n          {\r\n            'direction': 'desc',\r\n            'property': 'ts'\r\n          }\r\n        ],\r\n        pageNum: 0,\r\n        pageSize: 0,\r\n        searchParams: {\r\n          searchMap: {\r\n            custCondList:[{key:'source_bill',oper:'=',value:this.source_bill}]\r\n          }\r\n        }\r\n      };\r\n      this.$http({\r\n        url: ylsBusi + 'prj/ins/page',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        method: 'post',\r\n        data: data,\r\n        dataType: 'json'\r\n      })\r\n        .then(res => {\r\n          let originalValue = res.data.data.content;\r\n          this.$refs['insuranceRef'].setData(\r\n            'ProjectInsure_t',\r\n            JSON.parse(JSON.stringify(originalValue))\r\n          );\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            message: '信息获取失败',\r\n            type: 'error'\r\n          });\r\n        });\r\n    },\r\n    //保险取消按钮\r\n    insuranceFormCancel: function(type) {\r\n      this.rmoveindex = '';\r\n      //关闭表单或者是下拉显示行\r\n      if (type === 'form') {\r\n        this.$refs['insuranceRef'].comp.formShow = false;\r\n      } else {\r\n        this.$refs['insuranceRef'].getTableComp().closeExpandRow();\r\n        let OtherContactTable = this.$refs.insuranceRef.getData('ProjectInsure_t');\r\n        OtherContactTable[this.baseEditIndex] = this.baseData;\r\n        this.$refs.insuranceRef.setData('ProjectInsure_t', OtherContactTable);\r\n      }\r\n    },\r\n    //保险主表保存\r\n    insuranceFormConfirm: function() {\r\n      //获取当前数据\r\n      let url='';\r\n      let data = this.$refs.insuranceRef.comp.ProjectInsure;\r\n      data.source_bill = this.source_bill;\r\n      if(data.pk_prj_insure){\r\n         url = ylsBusi+'prj/ins/update';\r\n      }else{\r\n         url = ylsBusi+'prj/ins/create';\r\n      }\r\n      //保存校验\r\n      this.$refs.insuranceRef.comp.$refs[\r\n        'projectInsure-form'\r\n      ].validate(valid => {\r\n        if (valid) {\r\n          this.$http({\r\n            url: url,\r\n            headers: { 'Content-Type': 'application/json' },\r\n            method: 'post',\r\n            data: JSON.parse(JSON.stringify(data))\r\n          })\r\n            .then(res => {\r\n              if (res.data.success === true) {\r\n                this.$message({\r\n                  message: '保存成功！',\r\n                  type: 'success'\r\n                });\r\n                this.requestInsurance();\r\n                this.$refs['insuranceRef'].comp.formShow = false;\r\n              } else {\r\n                this.$message({\r\n                  message: res.data.message,\r\n                  type: 'error'\r\n                });\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                message: '更新失败',\r\n                type: 'error'\r\n              });\r\n            });\r\n        }\r\n      });\r\n    },\r\n    //保险行编辑\r\n    insuranceFormedit: function(scope) {\r\n      //记录删除位置\r\n      this.rmoveindex = scope.$index;\r\n      //行下展开表单界面\r\n      let row = scope.row;\r\n      this.$refs['insuranceRef'].getTableComp().expandRow(row);\r\n      this.$refs['insuranceRef'].comp.formShow = false;\r\n      //ProjectInsure为表单数据对象参数\r\n      this.$refs['insuranceRef'].setData('ProjectInsure', row);\r\n\r\n      \r\n      // 备份数据\r\n      this.baseData = JSON.parse(JSON.stringify(scope.row));\r\n      this.baseEditIndex = scope.$index;\r\n    },\r\n    // 保险删除提示\r\n    insuranceFormdelete: function(scope) {\r\n      this.insuranceDelVisible = true;\r\n      this.delId = scope.row.pk_prj_insure;\r\n    },\r\n    // 保险删除方法\r\n    insuranceDeleteClick() {\r\n      this.$http({\r\n        url: ylsBusi + 'prj/ins/deleteById',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        method: 'post',\r\n        dataType: 'json',\r\n        data: this.delId\r\n      })\r\n        .then(res => {\r\n          if (res.data.success === true) {\r\n            this.$message({\r\n              message: '删除成功',\r\n              type: 'success'\r\n            });\r\n            this.requestInsurance();\r\n          } else {\r\n            this.$message({\r\n              message: res.data.message,\r\n              type: 'error'\r\n            });\r\n          }\r\n        })\r\n        .catch(e => {\r\n          this.$message({\r\n            message: '信息删除失败！',\r\n            type: 'error'\r\n          });\r\n        });\r\n      this.insuranceDelVisible = false;\r\n      this.delId = '';\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// busi_insure.vue?7aefe2a4"],"sourceRoot":""}